import{r as x,j as e,L as A,X as le,M as Ze,F as es,n as ss,I as ts,o as rs,p as M,u as P,q as m,A as ce,t as J,v as as,B as de,w as Ae,x as me,y as ie,z as ue,D as Re,E as Ee,H as is,J as ns,K as os,N as q,O as Te,P as xe,Q as Ie,S as ls,U as cs,V as ds,Y as ms,W as Le,Z as us,$ as De,a0 as xs,a1 as Me,a2 as Pe,a3 as je,a4 as we,a5 as he,a6 as hs,a7 as gs,a8 as ps,a9 as ze,aa as fs,ab as bs,ac as ys,ad as js,ae as ws,af as ve,ag as ne,ah as vs,ai as Ns,aj as Ne,ak as Ss,al as ks,am as Cs,an as As,ao as Rs,ap as Es,aq as Ts,ar as Is,as as Ls,at as Ds,au as Ms,av as Ps,aw as zs,ax as _s,ay as T,az as _e,aA as Fs,aB as $s}from"./vendor.Cl0V4HC2.js";import{C as Fe,B as F,P as $e,T as j,A as Ue,b as G,d as K,e as Us,f as Os,G as O,h as W,i as H}from"./mui.DyFBWZos.js";import{P as ae,E as Oe,L as We,A as Ws,a as Hs,b as Bs,c as qs,T as Vs}from"./mui-icons.DllGP6YL.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function a(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(i){if(i.ep)return;i.ep=!0;const l=a(i);fetch(i.href,l)}})();const ge=()=>{const[s,t]=x.useState(!1),a=()=>{t(!s)};return e.jsxs("header",{className:"sticky top-0 z-50 bg-white shadow-sm",children:[e.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs(A,{to:"/",className:"text-2xl font-bold text-blue-600",children:["DigiWise",e.jsx("span",{className:"block text-xs text-gray-500 font-normal",children:"Digitally Wise"})]})}),e.jsxs("nav",{className:"hidden md:flex items-center space-x-8",children:[e.jsx(A,{to:"/about",className:"text-gray-600 hover:text-blue-600 transition-colors",children:"About"}),e.jsx(A,{to:"/resources",className:"text-gray-600 hover:text-blue-600 transition-colors",children:"Resources"}),e.jsx(A,{to:"/auth",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md transition-colors",children:"Take Assessment"})]}),e.jsx("button",{className:"md:hidden text-gray-600 focus:outline-none",onClick:a,"aria-label":"Toggle menu",children:s?e.jsx(le,{size:24}):e.jsx(Ze,{size:24})})]}),s&&e.jsx("div",{className:"md:hidden bg-white border-t border-gray-100 py-4 px-4 shadow-md",children:e.jsxs("nav",{className:"flex flex-col space-y-4",children:[e.jsx(A,{to:"/about",className:"text-gray-600 hover:text-blue-600 transition-colors py-2",onClick:()=>t(!1),children:"About"}),e.jsx(A,{to:"/resources",className:"text-gray-600 hover:text-blue-600 transition-colors py-2",onClick:()=>t(!1),children:"Resources"}),e.jsx(A,{to:"/auth",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md transition-colors w-full text-center",onClick:()=>t(!1),children:"Take Assessment"})]})})]})},pe=()=>e.jsx("footer",{className:"bg-gray-800 text-white py-12",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"DigiWise"}),e.jsx("p",{className:"text-gray-300",children:"Helping you build a healthier relationship with technology"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Quick Links"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:"About Us"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:"Our Methodology"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:"Resources"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:"Take Assessment"})}),e.jsx("li",{children:e.jsx(A,{to:"/admin/login",className:"text-gray-300 hover:text-white transition-colors",children:"Admin Portal"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Legal"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:"Privacy Policy"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:"Terms of Service"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:"Cookie Policy"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Connect With Us"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:e.jsx(es,{size:20})}),e.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:e.jsx(ss,{size:20})}),e.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:e.jsx(ts,{size:20})}),e.jsx("a",{href:"#",className:"text-gray-300 hover:text-white transition-colors",children:e.jsx(rs,{size:20})})]})]})]}),e.jsx("div",{className:"border-t border-gray-700 pt-6 text-center text-gray-400",children:e.jsxs("p",{children:["Â© 2025 DigiWise. All rights reserved. Powered by"," ",e.jsx("a",{href:"https://www.techpro360solutions.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-gray-300 transition-colors",children:"TechPro360 Solutions"}),"."]})})]})}),He="http://69.62.74.112:5001/api",L=M.create({baseURL:He,timeout:1e4,headers:{"Content-Type":"application/json",Accept:"application/json","Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"},withCredentials:!0,transformRequest:[(s,t)=>{if(s){const a=JSON.stringify(s);return console.log("Sending request with data:",a),t["Content-Length"]=Buffer.byteLength(a,"utf8"),a}return s}]});L.interceptors.response.use(s=>s,async s=>{const t=s.config;return s.response?.status===429&&!t._retry?(t._retry=!0,await new Promise(a=>setTimeout(a,2e3)),L(t)):Promise.reject(s)});const Gs={register:async s=>{try{const t={first_name:s.first_name,last_name:s.last_name,email:s.email,password:s.password,age_range:s.age_range,region:s.region,role:s.role||"examinee"};console.log("=== Registration Payload ==="),console.log("Sending to /auth/register:",JSON.stringify(t,null,2));const a=await M({method:"post",url:`${He}/auth/register`,data:t,headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});return console.log("=== Registration Response ==="),console.log("Status:",a.status),console.log("Headers:",a.headers),console.log("Response data:",a.data),a.data}catch(t){if(console.error("Registration API error:",t),typeof t=="object"&&t!==null){const a=t;if(a.response?.status===429)throw new Error("Too many requests. Please wait a moment and try again.");if(a.response?.status===400){const r=a.response.data?.message||"Invalid registration data";throw new Error(Array.isArray(r)?r.join(" "):r)}if(a.response?.status>=500)throw new Error("Server error. Please try again later.");if(a.response?.data?.message)throw new Error(a.response.data.message);if(a.message==="Network Error")throw new Error("Unable to connect to the server. Please check your internet connection.")}throw t instanceof Error?t:new Error("An unknown error occurred during registration.")}},login:async(s,t)=>{try{return(await L.post("/examinees/login",{email:s,password:t})).data}catch(a){throw typeof a=="object"&&a&&"response"in a&&a.response?.status===429?new Error("Too many requests. Please wait a moment and try again."):a instanceof Error?a:new Error("Unknown error occurred.")}},saveInfo:async s=>{try{return(await L.post("/examinees/info",s)).data}catch(t){throw typeof t=="object"&&t&&"response"in t&&t.response?.status===429?new Error("Too many requests. Please wait a moment and try again."):t instanceof Error?t:new Error("Unknown error occurred.")}},startExamination:async s=>{try{return(await L.post("/examinations/start",{userId:s})).data}catch(t){throw typeof t=="object"&&t&&"response"in t&&t.response?.status===429?new Error("Too many requests. Please wait a moment and try again."):t instanceof Error?t:new Error("Unknown error occurred.")}},submitAnswers:async(s,t)=>{try{return(await L.post(`/examinations/${s}/answers`,{answers:t})).data}catch(a){throw typeof a=="object"&&a&&"response"in a&&a.response?.status===429?new Error("Too many requests. Please wait a moment and try again."):a instanceof Error?a:new Error("Unknown error occurred.")}},completeExamination:async s=>{try{return(await L.post(`/examinations/${s}/complete`)).data}catch(t){throw typeof t=="object"&&t&&"response"in t&&t.response?.status===429?new Error("Too many requests. Please wait a moment and try again."):t instanceof Error?t:new Error("Unknown error occurred.")}},getResults:async s=>{try{return(await L.get(`/examinations/${s}/results`)).data}catch(t){throw typeof t=="object"&&t&&"response"in t&&t.response?.status===429?new Error("Too many requests. Please wait a moment and try again."):t instanceof Error?t:new Error("Unknown error occurred.")}},getExaminationHistory:async s=>{try{return(await L.get(`/examinees/${s}/examinations`)).data}catch(t){throw typeof t=="object"&&t&&"response"in t&&t.response?.status===429?new Error("Too many requests. Please wait a moment and try again."):t instanceof Error?t:new Error("Unknown error occurred.")}}},Be=x.createContext(void 0),Q=()=>{const s=x.useContext(Be);if(!s)throw new Error("useUser must be used within a UserProvider");return s},Qs=({children:s})=>{const[t,a]=x.useState({user:null,token:localStorage.getItem("userToken"),isAuthenticated:!1,isLoading:!0});x.useEffect(()=>{(async()=>{const o=localStorage.getItem("userToken");if(!o){a(h=>({...h,isLoading:!1}));return}try{const h=await M.get("http://69.62.74.112:5001/api/users/me",{headers:{Authorization:`Bearer ${o}`}});if(h.data.user)a({user:h.data.user,token:o,isAuthenticated:!0,isLoading:!1});else throw new Error("No user data received")}catch(h){console.error("Token verification failed:",h),localStorage.removeItem("userToken"),a({user:null,token:null,isAuthenticated:!1,isLoading:!1})}})()},[]);const r=async(c,o)=>{try{a(y=>({...y,isLoading:!0})),console.log("=== Login Debug ==="),console.log("Sending login request to:","/api/users/login"),console.log("Email:",c);const h={email:c.trim(),password:o};console.log("Request payload:",JSON.stringify({...h,password:"***"},null,2));const n=await M({method:"post",url:"http://69.62.74.112:5001/api/users/login",data:h,headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0,validateStatus:y=>y<500});if(console.log("=== Login Response ==="),console.log("Status:",n.status),console.log("Status Text:",n.statusText),console.log("Response data:",n.data),console.log("Response headers:",n.headers),n.status===401)throw console.error("Authentication failed. Possible reasons:"),console.error("- Incorrect email or password"),console.error("- User does not exist"),console.error("- Account is not activated"),new Error("Invalid email or password");if(!n.data)throw new Error("No data received from server");const{user:g,token:u,status:f,success:d}=n.data;if(f!=="success"||!d||!g||!u)throw new Error(n.data.message||"Authentication failed");const b={id:g.id,firstName:g.firstName,lastName:g.lastName,email:g.email,role:g.role||"user"};return a({user:b,token:u,isAuthenticated:!0,isLoading:!1}),localStorage.setItem("userToken",u),console.log("Token stored in localStorage"),{success:!0}}catch(h){console.error("Login error:",h);const n=h.response?.data?.message||h.message||"Login failed";return a(g=>({...g,isLoading:!1,error:n})),{success:!1,error:n}}},i=async()=>{a({user:null,token:null,isAuthenticated:!1,isLoading:!1}),localStorage.removeItem("userToken")},l=async c=>{try{console.log("=== User Registration Debug ==="),console.log("Raw user data:",c);const o={first_name:c.first_name||c.firstName||"",last_name:c.last_name||c.lastName||"",email:c.email||"",password:c.password,age_range:c.age_range||c.ageRange||"",region:c.region||"",role:c.role||"examinee"},n=["first_name","last_name","email","password","age_range","region"].filter(b=>!o[b]);if(n.length>0)throw new Error(`Missing required fields: ${n.join(", ")}`);console.log("Processed registration data:",o);const g=await Gs.register(o);if(console.log("=== Registration Response ==="),console.log("Response data:",g),!g)throw new Error("No response received from server");const{user:u,token:f}=g;if(!u||!f)throw new Error("Registration failed: Invalid response format");const d={id:u.id,firstName:u.firstName||u.first_name||"",lastName:u.lastName||u.last_name||"",email:u.email,ageRange:u.ageRange||u.age_range,region:u.region,role:u.role||"examinee",first_name:u.firstName||u.first_name||"",last_name:u.lastName||u.last_name||"",age_range:u.ageRange||u.age_range};return console.log("Mapped user data with camelCase:",d),console.log("Mapped user data from response:",d),a({user:d,token:f,isAuthenticated:!0,isLoading:!1}),localStorage.setItem("userToken",f),console.log("User registration successful:",d.email),{success:!0}}catch(o){throw console.error("Registration error details:",{message:o.message,response:o.response?.data,status:o.response?.status}),o.response?.data?.message?new Error(o.response.data.message):o.response?new Error(`Registration failed: ${o.response.status} ${o.response.statusText}`):o.request?new Error("No response from server. Please check your connection."):new Error(o.message||"Registration failed")}};return t.isLoading?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):e.jsx(Be.Provider,{value:{state:t,login:r,logout:i,register:l},children:s})},Ys=()=>{const s=P(),{state:t}=Q(),a=()=>{t.isAuthenticated?s("/assessment"):s("/auth")};return e.jsxs("section",{className:"relative bg-gradient-to-br from-blue-50 via-white to-indigo-50 py-20 md:py-28 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-1/4 w-64 h-64 bg-blue-100 rounded-full mix-blend-multiply filter blur-3xl opacity-30"}),e.jsx("div",{className:"absolute bottom-0 right-1/3 w-80 h-80 bg-indigo-100 rounded-full mix-blend-multiply filter blur-3xl opacity-30"})]}),e.jsx("div",{className:"container mx-auto px-4 relative z-10",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center",children:[e.jsxs(m.div,{className:"md:w-1/2 mb-12 md:mb-0 md:pr-8",initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.8},children:[e.jsx("div",{className:"inline-block px-3 py-1 mb-4 rounded-full bg-blue-100 text-blue-700 text-sm font-medium",children:"Scientifically-backed assessment"}),e.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-gray-800 mb-6 leading-tight",children:["Discover Your"," ",e.jsx("span",{className:"text-blue-600",children:"Digital Wellness"})," Score"]}),e.jsx("p",{className:"text-lg md:text-xl text-gray-600 mb-8 leading-relaxed",children:"Take our scientifically-validated assessment and get personalized insights to improve your relationship with technology."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(m.button,{onClick:a,className:"group relative inline-flex items-center justify-center overflow-hidden rounded-lg bg-blue-600 px-8 py-4 text-white font-medium shadow-lg transition-all duration-300 hover:bg-blue-700 hover:scale-[1.03]",whileHover:{boxShadow:"0 10px 25px -5px rgba(59, 130, 246, 0.4)"},whileTap:{scale:.98},children:e.jsxs("span",{className:"relative flex items-center gap-2",children:["Take Free Assessment",e.jsx(ce,{size:18,className:"transition-transform group-hover:translate-x-1"})]})}),e.jsx(A,{to:"/about",children:e.jsx("button",{className:"inline-flex items-center justify-center px-8 py-4 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-blue-600 transition-colors",children:"Learn More"})})]})]}),e.jsx(m.div,{className:"md:w-1/2",initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{duration:.8,delay:.2},children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl blur-sm opacity-20"}),e.jsxs("div",{className:"relative bg-white rounded-2xl p-2 shadow-xl",children:[e.jsx("img",{src:"https://images.unsplash.com/photo-1499951360447-b19be8fe80f5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80",alt:"Digital wellness balance",className:"rounded-xl shadow-sm w-full h-auto"}),e.jsxs("div",{className:"absolute -bottom-6 -left-6 bg-white rounded-lg shadow-lg p-4 max-w-[200px]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-gray-800",children:"Digital Wellness"})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-green-500 rounded-full",style:{width:"75%"}})})]})]})]})})]})})]})},Xs=()=>{const s=[{id:1,stat:"Average Filipino spends 10+ hours on devices daily",description:"More than 40% of waking hours are spent on screens",icon:e.jsx(J,{className:"w-8 h-8 text-blue-600"}),color:"bg-blue-50",highlight:"10+ hours"},{id:2,stat:"Digital Balance is Essential",description:"Finding harmony between online and offline life is crucial for wellbeing",icon:e.jsx(as,{className:"w-8 h-8 text-purple-600"}),color:"bg-purple-50",highlight:"Essential"},{id:3,stat:"Digital wellness affects sleep, relationships, and mental health",description:"Poor digital habits correlate with increased anxiety and depression",icon:e.jsx(de,{className:"w-8 h-8 text-red-600"}),color:"bg-red-50",highlight:"mental health"}],t={hidden:{},show:{transition:{staggerChildren:.2}}},a={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.6}}};return e.jsx("section",{className:"py-20 bg-gradient-to-b from-white to-gray-50",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs(m.div,{className:"text-center max-w-3xl mx-auto mb-16",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-800 mb-4",children:"Is Technology Taking Over Your Life?"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Digital technology has transformed our lives, but excessive and unhealthy use can lead to significant negative impacts on our wellbeing."})]}),e.jsx(m.div,{className:"grid grid-cols-1 md:grid-cols-3 gap-8",variants:t,initial:"hidden",whileInView:"show",viewport:{once:!0,margin:"-100px"},children:s.map(r=>e.jsxs(m.div,{variants:a,className:`${r.color} rounded-xl p-8 shadow-sm hover:shadow-md transition-all duration-300 transform hover:-translate-y-1 border border-gray-100`,children:[e.jsx("div",{className:"mb-6",children:r.icon}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:r.stat.split(r.highlight).map((i,l,c)=>l===0?e.jsxs(x.Fragment,{children:[i,e.jsx("span",{className:"text-blue-600 font-bold",children:l<c.length-1?r.highlight:""})]},l):i)}),e.jsx("p",{className:"text-gray-600",children:r.description})]},r.id))})]})})},Ks=()=>{const[s,t]=x.useState(null),a=[{id:1,color:"#22C55E",hoverColor:"hover:bg-green-50",borderColor:"border-green-200",name:"Green",description:"Little to No Risk",behaviors:"Balanced tech use, regular digital breaks, healthy boundaries",icon:e.jsx(me,{className:"w-6 h-6 text-green-500"})},{id:2,color:"#EAB308",hoverColor:"hover:bg-yellow-50",borderColor:"border-yellow-200",name:"Yellow",description:"Low to Moderate Risk",behaviors:"Occasional overuse, minor sleep disruption, slight dependency",icon:e.jsx(ie,{className:"w-6 h-6 text-yellow-500"})},{id:3,color:"#F97316",hoverColor:"hover:bg-orange-50",borderColor:"border-orange-200",name:"Orange",description:"Concerning Risk",behaviors:"Frequent overuse, social replacement, productivity impacts",icon:e.jsx(ue,{className:"w-6 h-6 text-orange-500"})},{id:4,color:"#EF4444",hoverColor:"hover:bg-red-50",borderColor:"border-red-200",name:"Red",description:"Serious Risk",behaviors:"Constant device use, withdrawal symptoms, significant life disruption",icon:e.jsx(Re,{className:"w-6 h-6 text-red-500"})}],r={hidden:{},show:{transition:{staggerChildren:.1}}},i={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.5}}};return e.jsx("section",{className:"py-20 bg-white",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs(m.div,{className:"text-center max-w-3xl mx-auto mb-16",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:[e.jsxs("div",{className:"inline-flex items-center justify-center gap-2 px-3 py-1 mb-4 rounded-full bg-blue-50 text-blue-700 text-sm font-medium",children:[e.jsx(Ae,{size:16}),e.jsx("span",{children:"Understand your risk"})]}),e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-800 mb-4",children:"Where Do You Stand on the Digital Wellness Spectrum?"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Our scientifically-validated assessment helps you identify your risk level and provides personalized recommendations"})]}),e.jsx(m.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-16",variants:r,initial:"hidden",whileInView:"show",viewport:{once:!0,margin:"-100px"},children:a.map((l,c)=>e.jsxs(m.div,{variants:i,className:`border rounded-xl overflow-hidden transition-all duration-300 ${l.borderColor} ${l.hoverColor} ${s===l.id?"shadow-lg scale-[1.02]":"shadow-sm"}`,onMouseEnter:()=>t(l.id),onMouseLeave:()=>t(null),children:[e.jsx("div",{className:"h-2",style:{backgroundColor:l.color}}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[l.icon,e.jsx("span",{className:"ml-2 text-lg font-semibold",children:l.name})]}),e.jsx("h3",{className:"text-xl font-semibold mb-3",children:l.description}),e.jsx("p",{className:"text-gray-600",children:l.behaviors})]})]},l.id))}),e.jsx("div",{className:"relative max-w-4xl mx-auto",children:e.jsx("div",{className:"h-24 bg-white rounded-lg shadow-md p-6 flex items-center",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Low Risk"}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"High Risk"})]}),e.jsxs("div",{className:"relative h-4 w-full",children:[e.jsxs("div",{className:"absolute w-full h-2 bg-gray-200 rounded-full top-1/2 -translate-y-1/2",children:[e.jsx("div",{className:"absolute left-0 w-1/4 h-2 bg-green-500 rounded-l-full"}),e.jsx("div",{className:"absolute left-1/4 w-1/4 h-2 bg-yellow-500"}),e.jsx("div",{className:"absolute left-2/4 w-1/4 h-2 bg-orange-500"}),e.jsx("div",{className:"absolute left-3/4 w-1/4 h-2 bg-red-500 rounded-r-full"})]}),e.jsx("div",{className:"absolute left-0 top-0 w-6 h-6 rounded-full bg-green-500 border-2 border-white shadow-md transform -translate-x-1/2"}),e.jsx("div",{className:"absolute left-1/4 top-0 w-6 h-6 rounded-full bg-yellow-500 border-2 border-white shadow-md transform -translate-x-1/2"}),e.jsx("div",{className:"absolute left-2/4 top-0 w-6 h-6 rounded-full bg-orange-500 border-2 border-white shadow-md transform -translate-x-1/2"}),e.jsx("div",{className:"absolute left-3/4 top-0 w-6 h-6 rounded-full bg-red-500 border-2 border-white shadow-md transform -translate-x-1/2"}),e.jsx("div",{className:"absolute left-full top-0 w-6 h-6 rounded-full bg-red-600 border-2 border-white shadow-md transform -translate-x-1/2"}),e.jsx(m.div,{className:"absolute top-0 w-8 h-8 rounded-full bg-blue-600 border-2 border-white shadow-lg transform -translate-x-1/2 z-10",initial:{left:"10%"},animate:{left:["10%","30%","60%","85%","40%"],transition:{duration:8,repeat:1/0,repeatType:"reverse",ease:"easeInOut"}},children:e.jsx("span",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-blue-600 text-white text-xs py-1 px-2 rounded whitespace-nowrap",children:"Your Score"})})]})]})})})]})})},Js=()=>{const[s,t]=x.useState(null),a=[{id:1,title:"Take 5-Minute Assessment",description:"Answer questions about your digital habits and usage patterns",icon:e.jsx(Ee,{size:28,className:"text-blue-600"}),color:"bg-blue-50",borderColor:"border-blue-100"},{id:2,title:"Get Your Risk Score",description:"Receive your personalized digital wellness risk level and detailed analysis",icon:e.jsx(is,{size:28,className:"text-indigo-600"}),color:"bg-indigo-50",borderColor:"border-indigo-100"},{id:3,title:"Follow Personalized Plan",description:"Implement tailored recommendations to improve your digital wellness",icon:e.jsx(ns,{size:28,className:"text-emerald-600"}),color:"bg-emerald-50",borderColor:"border-emerald-100"}];return e.jsxs("section",{className:"py-20 bg-gradient-to-b from-gray-50 to-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 -mt-24 -mr-24 w-64 h-64 bg-blue-50 rounded-full opacity-70 blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 -mb-24 -ml-24 w-64 h-64 bg-indigo-50 rounded-full opacity-70 blur-3xl"}),e.jsxs("div",{className:"container mx-auto px-4 relative z-10",children:[e.jsxs(m.div,{className:"text-center max-w-3xl mx-auto mb-16",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-800 mb-4",children:"How It Works"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Our simple three-step process helps you understand and improve your digital wellness"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start relative",children:[e.jsx("div",{className:"hidden md:block absolute top-12 left-[calc(16.67%+20px)] right-[calc(16.67%+20px)] h-0.5 bg-gray-200 z-0"}),a.map((r,i)=>e.jsxs(m.div,{className:"flex flex-col items-center text-center md:w-1/3 mb-12 md:mb-0 relative z-10",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:i*.2},onMouseEnter:()=>t(r.id),onMouseLeave:()=>t(null),children:[e.jsxs("div",{className:"relative",children:[e.jsx(m.div,{className:`absolute -top-3 -right-3 ${s===r.id?"bg-blue-600":"bg-gray-700"} text-white w-8 h-8 rounded-full flex items-center justify-center font-bold transition-colors duration-300 z-20`,animate:{scale:s===r.id?1.1:1},transition:{duration:.2},children:r.id}),e.jsx(m.div,{className:`${r.color} w-16 h-16 rounded-full shadow-md flex items-center justify-center mb-6 border ${r.borderColor}`,animate:{scale:s===r.id?1.1:1,boxShadow:s===r.id?"0 10px 25px -5px rgba(0, 0, 0, 0.1)":"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},transition:{duration:.3},children:r.icon})]}),e.jsx("h3",{className:"text-xl font-semibold mb-3",children:r.title}),e.jsx("p",{className:"text-gray-600 max-w-xs",children:r.description})]},r.id))]}),e.jsx(m.div,{className:"mt-16 text-center",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.6},children:e.jsx(A,{to:"/assessment",children:e.jsxs(m.button,{className:"group bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg shadow-lg transition-all duration-300 flex items-center mx-auto",whileHover:{scale:1.03},whileTap:{scale:.98},children:["Start Your Assessment",e.jsx(ce,{size:18,className:"ml-2 transition-transform group-hover:translate-x-1"})]})})})]})]})},Zs=({isOpen:s,onClose:t,onConfirm:a})=>s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:r=>{r.target===r.currentTarget&&t()},children:e.jsxs(m.div,{className:"bg-white rounded-xl shadow-xl max-w-md w-full",initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},transition:{duration:.2},onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-gray-100 p-5",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-amber-100 p-2 rounded-full mr-3",children:e.jsx(ue,{size:20,className:"text-amber-500"})}),e.jsx("h3",{className:"font-semibold text-lg text-gray-800",children:"Exit Assessment?"})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close modal",children:e.jsx(le,{size:20})})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to exit? Your progress will be lost and you'll need to start over next time."}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-3",children:[e.jsx(m.button,{onClick:t,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Continue Assessment"}),e.jsx(m.button,{onClick:a,className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg shadow-sm transition-colors mb-2 sm:mb-0",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Exit Assessment"})]})]})]})}):null,D=[{id:1,category:"Screen Time",text:"Social media use negatively affects my academic performance."},{id:2,category:"Screen Time",text:"People close to me have expressed concern about my social media use."},{id:3,category:"Screen Time",text:"I spend more time on social media than I intend to."},{id:4,category:"Screen Time",text:"I often lose track of time when using social media."},{id:5,category:"Screen Time",text:"I feel stressed when I am not able to check my social media accounts."},{id:6,category:"Screen Time",text:"I find it difficult to limit my social media usage even when I try."},{id:7,category:"Screen Time",text:"I feel left out when I'm not up-to-date with social media posts."},{id:8,category:"Screen Time",text:"My tendency to prioritize social media over task completion adversely affects my productivity."},{id:9,category:"Screen Time",text:"Facebook is the main reason why I stay up late at night."},{id:10,category:"Screen Time",text:"When I spend too much time on screens, I find it hard to get things done during the day."},{id:11,category:"Mental Health Effects",text:"I feel more anxious after spending time on social media."},{id:12,category:"Mental Health Effects",text:"Social media often makes me feel like my life is inadequate compared to others."},{id:13,category:"Mental Health Effects",text:"I feel lonely even when I'm interacting with others online."},{id:14,category:"Mental Health Effects",text:"Checking social media is one of the first things I do most mornings."},{id:15,category:"Mental Health Effects",text:"I use social media to relieve of stress."},{id:16,category:"Mental Health Effects",text:"Seeing others' posts on social media impacts my self-esteem."},{id:17,category:"Mental Health Effects",text:"I feel emotionally drained after scrolling through social media."},{id:18,category:"Mental Health Effects",text:"My mood is often affected by the content I see on social media."},{id:19,category:"Mental Health Effects",text:"I am hooked to social media, even when I know it worsens my mental health."},{id:20,category:"Mental Health Effects",text:"Taking breaks from social media improves my emotional well-being."},{id:21,category:"Digital Well-being",text:"My sleep schedule is affected by late-night social media use."},{id:22,category:"Digital Well-being",text:"I want to develop healthy habits for responsible social media use."},{id:23,category:"Digital Well-being",text:"I am aware of how much time I spend on social media."},{id:24,category:"Digital Well-being",text:"I feel in control of how I use social media."},{id:25,category:"Digital Well-being",text:"I set limits for my social media use to maintain a healthy balance."},{id:26,category:"Digital Well-being",text:"I take regular breaks from social media to maintain my well-being."},{id:27,category:"Digital Well-being",text:"I use social media intentionally rather than out of habit."},{id:28,category:"Digital Well-being",text:"I use social media to support my emotional well-being."},{id:29,category:"Digital Well-being",text:"I reflect on how social media affects my mood."},{id:30,category:"Digital Well-being",text:"I minimize my social media usage when I notice negative effects on my well-being."}],et=({currentQuestion:s,totalQuestions:t,progress:a})=>{const r=P(),[i,l]=x.useState(!1),c=x.useMemo(()=>{const n=[...new Set(D.map(u=>u.category))],g={};return n.forEach(u=>{const f=D.filter(y=>y.category===u).length;let d,b;switch(u){case"Screen Time":d="bg-blue-600",b=e.jsx(J,{size:14,className:"mr-1"});break;case"Mental Health Effects":d="bg-purple-600",b=e.jsx(de,{size:14,className:"mr-1"});break;case"Digital Well-being":d="bg-emerald-600",b=e.jsx(q,{size:14,className:"mr-1"});break;default:d="bg-gray-600",b=e.jsx(q,{size:14,className:"mr-1"})}g[u]={count:f,color:d,icon:b}}),g},[]),o=()=>{l(!0)},h=()=>{l(!1),r("/")};return e.jsxs("header",{className:"sticky top-0 bg-white shadow-sm z-10",role:"banner","aria-label":"Assessment progress",children:[e.jsxs("div",{className:"container mx-auto px-4 py-3 max-w-3xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg md:text-xl font-semibold text-gray-800",children:"Digital Wellness Assessment"}),e.jsxs("div",{className:"flex items-center mt-0.5",children:[e.jsxs(m.div,{className:"text-sm text-blue-600 font-medium",initial:{opacity:.7},animate:{opacity:1},transition:{duration:.2},children:["Question ",s," of ",t]},s),e.jsx("div",{className:"mx-2 text-gray-400",children:"â¢"}),e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsxs("span",{className:"font-medium",children:[a,"%"]})," complete"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-1.5 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50","aria-label":"Get help",title:"Get help",children:e.jsx(os,{size:18})}),e.jsxs("button",{className:"flex items-center px-2 py-1.5 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50",onClick:o,"aria-label":"Save and exit assessment",children:[e.jsx(le,{size:16,className:"mr-1","aria-hidden":"true"}),e.jsx("span",{className:"font-medium",children:"Exit"})]})]})]}),e.jsx("div",{className:"flex mb-3 space-x-2",children:Object.entries(c).map(([n,g])=>{const u=g.count;return e.jsxs("div",{className:"flex items-center text-xs",children:[g.icon,e.jsx("span",{className:"text-gray-700",children:n}),e.jsxs("span",{className:"text-gray-500 ml-1",children:["(",u,")"]})]},n)})}),e.jsx("div",{className:"h-1.5 bg-gray-200 rounded-full overflow-hidden",role:"progressbar","aria-valuenow":a,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`${a}% complete`,children:e.jsx(m.div,{className:"h-full bg-blue-600",style:{width:`${a}%`},initial:{width:0},animate:{width:`${a}%`},transition:{duration:.8,ease:"easeOut"}})})]}),e.jsx(Zs,{isOpen:i,onClose:()=>l(!1),onConfirm:h})]})},st=({selectedValue:s,onChange:t})=>{const a=[{value:4,label:"Strongly Agree",description:"This completely describes me"},{value:3,label:"Agree",description:"This somewhat describes me"},{value:2,label:"Disagree",description:"This doesn't really describe me"},{value:1,label:"Strongly Disagree",description:"This doesn't describe me at all"}],r=x.useRef([]),i=(l,c)=>{switch(l.key){case"ArrowUp":case"ArrowLeft":{l.preventDefault();const o=c-1>=0?c-1:a.length-1;r.current[o]?.focus(),t(a[o].value);break}case"ArrowDown":case"ArrowRight":{l.preventDefault();const o=c+1<a.length?c+1:0;r.current[o]?.focus(),t(a[o].value);break}case" ":case"Enter":{l.preventDefault(),t(a[c].value);break}}};return x.useEffect(()=>{s===void 0&&r.current[0]&&r.current[0].focus()},[]),e.jsx("div",{className:"space-y-2.5",role:"radiogroup","aria-required":"true","aria-label":"Answer options",tabIndex:-1,children:a.map((l,c)=>e.jsx(m.button,{ref:o=>r.current[c]=o,onClick:()=>t(l.value),onKeyDown:o=>i(o,c),className:`w-full p-3 rounded-lg border transition-all focus:outline-none focus:ring-2 focus:ring-offset-0 focus:ring-blue-500
            ${s===l.value?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,role:"radio",type:"button","aria-checked":s===l.value,tabIndex:s===l.value?0:-1,whileHover:{scale:1.005},whileTap:{scale:.995},initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{duration:.2,delay:c*.05},children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 mt-0.5 mr-2.5 flex-shrink-0 transition-colors flex items-center justify-center
                ${s===l.value?"border-blue-600 bg-blue-600":"border-gray-300"}`,children:s===l.value&&e.jsx(m.div,{className:"w-2 h-2 bg-white rounded-full",initial:{scale:0},animate:{scale:1},transition:{duration:.1}})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium text-gray-800",children:l.label}),e.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:l.description})]})]})},l.value))})},tt=({question:s,selectedAnswer:t,onAnswer:a,onNext:r,onPrevious:i,isFirst:l,isLast:c,currentQuestionIndex:o,totalQuestions:h,categoryProgress:n,isSaving:g=!1})=>{const u={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3,when:"beforeChildren",staggerChildren:.05}}},f={hidden:{opacity:0,y:5},visible:{opacity:1,y:0,transition:{duration:.2}}},d=y=>{switch(y){case"Screen Time":return e.jsx(J,{size:18,className:"mr-2"});case"Mental Health Effects":return e.jsx(de,{size:18,className:"mr-2"});case"Digital Well-being":return e.jsx(q,{size:18,className:"mr-2"});default:return e.jsx(q,{size:18,className:"mr-2"})}},b=y=>{switch(y){case"Screen Time":return"bg-blue-100 text-blue-700 border-blue-200";case"Mental Health Effects":return"bg-purple-100 text-purple-700 border-purple-200";case"Digital Well-being":return"bg-emerald-100 text-emerald-700 border-emerald-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}};return e.jsxs(m.div,{className:"bg-white rounded-xl shadow-md p-5 md:p-6 border border-gray-100",role:"form","aria-labelledby":"question-title",variants:u,initial:"hidden",animate:"visible",children:[e.jsxs(m.div,{className:`mb-5 p-3 rounded-lg ${b(s.category)}`,variants:f,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[d(s.category),e.jsx("span",{className:"font-medium",children:s.category})]}),e.jsxs("div",{className:"text-sm",children:["Question ",n.current," of ",n.total," in this category"]})]}),e.jsx("div",{className:"mt-2 bg-white bg-opacity-50 h-1.5 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-current opacity-70",style:{width:`${n.current/n.total*100}%`}})})]}),e.jsxs(m.div,{className:"mb-5",variants:f,children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("h2",{id:"question-title",className:"text-lg md:text-xl font-semibold text-gray-800",children:s.text})}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Question ",o+1," of ",h," overall"]})]}),e.jsx(m.div,{variants:f,children:e.jsx(st,{selectedValue:t,onChange:a})}),e.jsxs(m.div,{className:"flex justify-between mt-6",variants:f,children:[e.jsxs(m.button,{onClick:i,disabled:l||g,className:`flex items-center px-3 py-2 rounded-md transition-all focus:outline-none focus:ring-2 focus:ring-blue-500
            ${l||g?"text-gray-400 cursor-not-allowed opacity-50":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"}`,"aria-label":"Previous question",whileHover:l?{}:{scale:1.02},whileTap:l?{}:{scale:.98},children:[e.jsx(Te,{size:16,className:"mr-1.5","aria-hidden":"true"}),"Previous"]}),e.jsxs(m.button,{onClick:r,disabled:!t||g,className:`flex items-center px-5 py-2 rounded-lg transition-all focus:outline-none focus:ring-2 focus:ring-blue-500
            ${!t||g?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 shadow-sm hover:shadow"}`,"aria-label":c?"Finish assessment":"Next question",whileHover:t!==void 0?{scale:1.02}:{},whileTap:t!==void 0?{scale:.98}:{},children:[c?"Complete Assessment":"Next Question",!c&&e.jsx(ce,{size:16,className:"ml-1.5","aria-hidden":"true"})]})]}),g&&e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("div",{className:"inline-flex items-center text-sm text-gray-500",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving your answer..."]})})]})},B=M.create({baseURL:"http://69.62.74.112:5001/api",headers:{"Content-Type":"application/json"}});B.interceptors.request.use(s=>{const t=localStorage.getItem("userToken");return console.log(`
=== Axios Request Interceptor ===`),console.log("URL:",s.url),console.log("Method:",s.method),console.log("Token from localStorage:",t),console.log("Current headers:",s.headers),t?(s.headers.Authorization=`Bearer ${t}`,console.log("Updated headers:",s.headers)):console.log("â No token found in localStorage"),s},s=>(console.error("Request interceptor error:",s),Promise.reject(s)));B.interceptors.response.use(s=>(console.log(`
=== Axios Response Interceptor ===`),console.log("Status:",s.status),console.log("Data:",s.data),s),s=>(console.error(`
=== Axios Error Interceptor ===`),console.error("Error:",s.message),console.error("Response:",s.response?.data),console.error("Status:",s.response?.status),console.error("Headers:",s.response?.headers),console.error("Request config:",s.config),Promise.reject(s)));const qe={answers:[],currentQuestionIndex:0,isComplete:!1,showResults:!1,userInfo:null,showUserInfoModal:!1,resultsSaved:!1,questions:D,currentQuestion:D[0],user:null,currentAssessment:null,startTime:null,completionTime:null,isSaving:!1,saveError:null,progress:0},rt=(s,t)=>{switch(t.type){case"SET_ANSWER":const a=s.answers.findIndex(r=>r.questionId===t.payload.questionId);if(a!==-1){const r=[...s.answers];return r[a]=t.payload,{...s,answers:r}}else return{...s,answers:[...s.answers,t.payload]};case"NEXT_QUESTION":return{...s,currentQuestionIndex:s.currentQuestionIndex+1,currentQuestion:D[s.currentQuestionIndex+1]};case"COMPLETE_ASSESSMENT":return{...s,isComplete:!0,completionTime:new Date};case"SHOW_RESULTS":return{...s,showResults:!0};case"SET_USER_INFO":return{...s,userInfo:t.payload};case"TOGGLE_USER_INFO_MODAL":return{...s,showUserInfoModal:!s.showUserInfoModal};case"MARK_RESULTS_SAVED":return{...s,resultsSaved:!0};case"SET_USER":return{...s,user:t.payload};case"SET_CURRENT_ASSESSMENT":return{...s,currentAssessment:t.payload};case"SET_SAVING":return{...s,isSaving:t.payload};case"SET_SAVE_ERROR":return{...s,saveError:t.payload};case"SET_PROGRESS":return{...s,progress:t.payload};case"SET_CURRENT_QUESTION":return{...s,currentQuestionIndex:t.payload};case"SET_COMPLETE":return{...s,isComplete:!0};case"RESET":return qe;default:return s}},Ve=x.createContext(void 0),at=({children:s})=>{const[t,a]=x.useReducer(rt,qe),{state:r}=Q(),i=D.length,l=D[t.currentQuestionIndex],c=Math.round((t.currentQuestionIndex+1)/i*100),o=x.useCallback(async(p,C)=>{if(!r.isAuthenticated||!r.user||!t.currentAssessment)throw new Error("User must be authenticated and have an active assessment");try{a({type:"SET_SAVING",payload:!0}),a({type:"SET_SAVE_ERROR",payload:null});const N=await B.post("/answers",{question_id:p,value:C,assessment_id:t.currentAssessment.id});if(N.data.success)a({type:"SET_PROGRESS",payload:N.data.data.progress});else throw new Error(N.data.message||"Failed to save answer")}catch(N){throw console.error("Error saving answer:",N),a({type:"SET_SAVE_ERROR",payload:N.response?.data?.message||"Failed to save answer"}),N}finally{a({type:"SET_SAVING",payload:!1})}},[r.isAuthenticated,r.user,r.token,t.currentAssessment]),h=x.useCallback(async(p,C)=>{try{await o(p,C),a({type:"SET_ANSWER",payload:{questionId:p,value:C}})}catch(N){throw console.error("Error in answerQuestion:",N),N}},[r.isAuthenticated,r.user,r.token,t.currentAssessment]),n=x.useCallback(()=>{t.currentQuestionIndex<i-1?a({type:"NEXT_QUESTION"}):a({type:"SHOW_RESULTS"})},[t.currentQuestionIndex,i]),g=x.useCallback(()=>{t.currentQuestionIndex>0&&a({type:"NEXT_QUESTION"})},[t.currentQuestionIndex]),u=x.useCallback(async()=>{try{if(!r.isAuthenticated||!r.user)throw new Error("User must be authenticated to start assessment");console.log(`
=== Assessment Start Request ===`),console.log("User:",r.user),console.log("Is authenticated:",r.isAuthenticated),console.log("Token from localStorage:",localStorage.getItem("userToken"));const p=await B.post("/assessment/start",{user_id:r.user.id,start_time:new Date});if(console.log("Response:",p.data),p.data.success)a({type:"SET_CURRENT_ASSESSMENT",payload:p.data.data});else throw new Error(p.data.message||"Failed to start assessment")}catch(p){throw console.error("Error starting assessment:",p),console.error("Error response:",p.response?.data),console.error("Error status:",p.response?.status),console.error("Error headers:",p.response?.headers),console.error("Request config:",p.config),p.response?.status===401?(console.error("Authentication failed. Please log in again."),new Error("Authentication failed. Please log in again.")):new Error(p.response?.data?.message||"Failed to start assessment")}},[r.isAuthenticated,r.user]),f=x.useCallback(async()=>{try{if(!t.currentAssessment)throw new Error("No active assessment found");const p=await B.post("/assessment/complete",{assessment_id:t.currentAssessment.id,completion_time:new Date});if(p.data.success)a({type:"COMPLETE_ASSESSMENT"});else throw new Error(p.data.message||"Failed to complete assessment")}catch(p){throw console.error("Error completing assessment:",p),new Error(p.response?.data?.message||"Failed to complete assessment")}},[t.currentAssessment]),d=x.useCallback(()=>{a({type:"SET_CURRENT_ASSESSMENT",payload:null})},[]),b=x.useCallback(()=>{a({type:"TOGGLE_USER_INFO_MODAL"})},[]),y=x.useCallback(()=>{a({type:"TOGGLE_USER_INFO_MODAL"})},[]),w=x.useCallback(p=>{a({type:"SET_USER_INFO",payload:p})},[]),S=x.useCallback(()=>{a({type:"MARK_RESULTS_SAVED"})},[]),E=x.useCallback(p=>t.answers.find(N=>N.questionId===p)?.value,[t.answers]),v=x.useCallback(()=>{if(t.answers.length===0)return{overallScore:0,categoryScores:{},riskLevel:"low"};const p=D.reduce((_,V)=>(_[V.category]||(_[V.category]=[]),_[V.category].push(V),_),{}),C={};let N=0,Y=0;Object.entries(p).forEach(([_,V])=>{let be=0,te=0;V.forEach(Ke=>{const re=t.answers.find(Je=>Je.questionId===Ke.id);re&&(be+=re.value,te++,N+=re.value,Y++)});const Ye=te*4,ye=te*1,Xe=(be-ye)/(Ye-ye)*100;C[_]=Math.round(Xe)});const X=Y*4,k=Y*1,I=(N-k)/(X-k)*100,$=Math.round(I);let U="low";return $>=75?U="severe":$>=50?U="high":$>=25&&(U="moderate"),{overallScore:$,categoryScores:C,riskLevel:U}},[t.answers]),z=async()=>{try{if(!r.isAuthenticated||!r.user||!t.currentAssessment)throw new Error("User must be authenticated and have an active assessment");a({type:"SET_SAVING",payload:!0}),a({type:"SET_SAVE_ERROR",payload:null});const p=await B.post("/answers/save-answers",{assessment_id:t.currentAssessment.id,answers:t.answers.map(C=>({question_id:C.questionId,value:C.value}))});if(p.data.success)a({type:"MARK_RESULTS_SAVED"}),a({type:"SET_PROGRESS",payload:p.data.data.progress});else throw new Error(p.data.message||"Failed to save answers")}catch(p){throw console.error("Error saving answers:",p),a({type:"SET_SAVE_ERROR",payload:p.response?.data?.message||"Failed to save answers"}),p}finally{a({type:"SET_SAVING",payload:!1})}};return e.jsx(Ve.Provider,{value:{state:t,currentQuestion:l,totalQuestions:i,progress:c,answerQuestion:h,goToNextQuestion:n,goToPreviousQuestion:g,startAssessment:u,completeAssessment:f,resetAssessment:d,getAnswerForQuestion:E,calculateResults:v,showUserInfoModal:b,hideUserInfoModal:y,setUserInfo:w,markResultsSaved:S,saveAnswers:z},children:s})},fe=()=>{const s=x.useContext(Ve);if(!s)throw new Error("useAssessment must be used within an AssessmentProvider");return s},it=()=>{const s=P(),{state:t}=Q(),{state:a,currentQuestion:r,totalQuestions:i,progress:l,getAnswerForQuestion:c,answerQuestion:o,goToNextQuestion:h,goToPreviousQuestion:n,startAssessment:g,completeAssessment:u}=fe(),[f,d]=x.useState(!0),[b,y]=x.useState(null);x.useEffect(()=>{!t.isLoading&&!t.isAuthenticated&&s("/auth")},[t.isAuthenticated,t.isLoading,s]),x.useEffect(()=>{const v=async()=>{try{d(!0),y(null),await g()}catch(z){y(z.message||"Failed to start assessment")}finally{d(!1)}};t.isAuthenticated&&!a.currentAssessment&&!t.isLoading&&v()},[t.isAuthenticated,t.isLoading,a.currentAssessment,g]),x.useEffect(()=>{a.isComplete&&s("/results")},[a.isComplete,s]);const w=()=>{if(!r)return{current:0,total:0};const v=D.filter(p=>p.category===r.category);return{current:v.findIndex(p=>p.id===r.id)+1,total:v.length}};if(t.isLoading)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});if(f)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Starting your assessment..."})]})});if(b)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Starting Assessment"}),e.jsx("p",{className:"text-gray-600 mb-4",children:b}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Try Again"})]})});if(!r)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading your assessment..."})]})});const S=async(v,z)=>{try{await o(v,z)}catch(p){y(p.message||"Failed to save answer")}},E=async()=>{try{a.currentQuestionIndex===i-1?(console.log("Completing assessment and navigating to results page."),await u(),s("/results")):h()}catch(v){y(v.message||"Failed to complete assessment")}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white",children:[e.jsx(et,{currentQuestion:a.currentQuestionIndex+1,totalQuestions:i,progress:l}),e.jsxs(m.main,{className:"container mx-auto px-4 py-6 max-w-3xl",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[a.saveError&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-red-600 text-sm",children:a.saveError})}),e.jsx(m.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2},children:e.jsx(tt,{question:r,selectedAnswer:c(r.id),onAnswer:v=>S(r.id,v),onNext:E,onPrevious:n,isFirst:a.currentQuestionIndex===0,isLast:a.currentQuestionIndex===i-1,currentQuestionIndex:a.currentQuestionIndex,totalQuestions:i,categoryProgress:w(),isSaving:a.isSaving})},r.id),e.jsx("div",{className:"mt-6 text-center text-sm text-gray-500",children:e.jsx("p",{children:"Your responses are automatically saved and will only be used to generate your personalized digital wellness profile."})})]})]})},nt=({score:s,riskLevel:t,completionDate:a,firstName:r})=>{const{state:i}=fe(),c=(h=>{switch(h){case"low":return{bg:"bg-green-500",text:"text-green-800",light:"bg-green-50",border:"border-green-200",gradient:"from-green-500 to-green-600"};case"moderate":return{bg:"bg-yellow-500",text:"text-yellow-800",light:"bg-yellow-50",border:"border-yellow-200",gradient:"from-yellow-500 to-yellow-600"};case"high":return{bg:"bg-orange-500",text:"text-orange-800",light:"bg-orange-50",border:"border-orange-200",gradient:"from-orange-500 to-orange-600"};case"severe":return{bg:"bg-red-500",text:"text-red-800",light:"bg-red-50",border:"border-red-200",gradient:"from-red-500 to-red-600"};default:return{bg:"bg-gray-500",text:"text-gray-800",light:"bg-gray-50",border:"border-gray-200",gradient:"from-gray-500 to-gray-600"}}})(t),o=t.charAt(0).toUpperCase()+t.slice(1);return e.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-100",role:"region","aria-label":"Results Summary",children:e.jsxs("div",{className:"md:flex",children:[e.jsxs("div",{className:`w-full md:w-1/3 bg-gradient-to-br ${c.gradient} text-white p-6 flex flex-col justify-between`,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(Ae,{size:16,className:"mr-1.5 opacity-80"}),e.jsx("span",{className:"text-sm font-medium opacity-90",children:"Your Risk Level"})]}),e.jsxs("h2",{className:"text-3xl font-bold mb-2",children:[o," Risk"]}),e.jsx("p",{className:"text-sm opacity-90",children:"Based on your responses to the Digital Wellness Assessment"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("span",{className:"text-xs font-medium opacity-90",children:"Low Risk"}),e.jsx("span",{className:"text-xs font-medium opacity-90",children:"High Risk"})]}),e.jsx("div",{className:"h-2 bg-white bg-opacity-20 rounded-full overflow-hidden",children:e.jsx(m.div,{className:"h-full bg-white",initial:{width:0},animate:{width:`${s}%`},transition:{duration:1,delay:.5}})})]})]}),e.jsxs("div",{className:"w-full md:w-2/3 p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-1",children:r?`${r}'s Assessment Results`:"Your Assessment Results"}),e.jsxs("div",{className:"flex items-center text-gray-500 mb-4",children:[e.jsx(xe,{size:16,className:"mr-1","aria-hidden":"true"}),e.jsxs("span",{children:[a.toLocaleDateString()," â¢ Overall Score:"," "]}),e.jsxs(m.span,{className:`ml-1 font-bold ${c.text}`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.7},children:[s,"%"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mt-2 md:mt-0",children:[e.jsxs(m.div,{className:`${c.light} ${c.border} text-sm font-medium px-3 py-1 rounded-full border flex items-center`,initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3,delay:.2},children:[e.jsx("span",{className:`w-2 h-2 ${c.bg} rounded-full mr-1.5`}),o," Risk Level"]}),e.jsxs(m.div,{className:"bg-blue-50 border-blue-200 text-blue-800 text-sm font-medium px-3 py-1 rounded-full border",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3,delay:.3},children:[Object.keys(i.answers||{}).length," Questions Answered"]})]})]}),e.jsxs("div",{className:"mt-4 bg-gray-50 rounded-lg p-4 border border-gray-100",children:[e.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"What Your Results Mean"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Your Digital Wellness Assessment score indicates your current relationship with technology. Higher scores suggest greater risk, while lower scores indicate healthier digital habits. Review your detailed breakdown below for personalized insights and recommendations."})]})]})]})})},ot=({riskLevel:s,score:t})=>{const r=(i=>{switch(i){case"low":return{color:"bg-green-50 border-green-200",textColor:"text-green-800",badgeColor:"bg-green-100 text-green-700 border-green-200",iconBg:"bg-green-100",iconColor:"text-green-600",icon:e.jsx(me,{className:"text-green-500",size:22}),title:"Healthy Digital Habits",description:"Your digital usage patterns show a healthy balance. Keep up the good work!",recommendations:["Continue maintaining your current digital boundaries","Share your strategies with friends and family","Set new goals to further improve your digital wellness","Consider becoming a digital wellness advocate in your community"]};case"moderate":return{color:"bg-yellow-50 border-yellow-200",textColor:"text-yellow-800",badgeColor:"bg-yellow-100 text-yellow-700 border-yellow-200",iconBg:"bg-yellow-100",iconColor:"text-yellow-600",icon:e.jsx(ie,{className:"text-yellow-500",size:22}),title:"Room for Improvement",description:"Your digital habits show some concerning patterns that could benefit from attention.",recommendations:["Set specific screen time limits on social media apps","Create designated tech-free zones in your home","Practice mindful device usage during meals","Try a digital detox for one day each week"]};case"high":return{color:"bg-orange-50 border-orange-200",textColor:"text-orange-800",badgeColor:"bg-orange-100 text-orange-700 border-orange-200",iconBg:"bg-orange-100",iconColor:"text-orange-600",icon:e.jsx(ue,{className:"text-orange-500",size:22}),title:"Concerning Digital Habits",description:"Your assessment indicates significant concerns with your digital usage patterns that require attention.",recommendations:["Schedule regular digital detox periods each week","Use app blocking tools during work/study hours","Seek support from friends or family members","Consider professional guidance if symptoms persist"]};case"severe":return{color:"bg-red-50 border-red-200",textColor:"text-red-800",badgeColor:"bg-red-100 text-red-700 border-red-200",iconBg:"bg-red-100",iconColor:"text-red-600",icon:e.jsx(Re,{className:"text-red-500",size:22}),title:"Serious Digital Wellness Concerns",description:"Your assessment reveals patterns that indicate a problematic relationship with technology requiring immediate attention.",recommendations:["Implement strict device usage limitations","Seek professional support for digital dependency","Replace screen time with alternative activities","Consider a comprehensive digital detox program"]};default:return{color:"bg-gray-50 border-gray-200",textColor:"text-gray-800",badgeColor:"bg-gray-100 text-gray-700 border-gray-200",iconBg:"bg-gray-100",iconColor:"text-gray-600",icon:e.jsx(ie,{className:"text-gray-500",size:22}),title:"Assessment Complete",description:"Review your results below.",recommendations:[]}}})(s);return e.jsxs(m.div,{className:`rounded-xl border p-6 ${r.color}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`${r.iconBg} p-2 rounded-full mr-3`,children:r.icon}),e.jsx("h2",{className:`text-xl font-bold ${r.textColor}`,children:r.title})]}),e.jsxs("div",{className:`px-3 py-1 rounded-full border text-sm font-medium ${r.badgeColor}`,children:[s.charAt(0).toUpperCase()+s.slice(1)," Risk"]})]}),e.jsx("p",{className:"text-gray-700 mb-5 leading-relaxed",children:r.description}),r.recommendations.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-3 flex items-center",children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${r.iconColor} mr-2`}),"Immediate Recommendations:"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:r.recommendations.map((i,l)=>e.jsxs(m.div,{className:"flex items-start bg-white bg-opacity-60 p-3 rounded-lg",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*l},children:[e.jsx("div",{className:`${r.iconBg} p-1 rounded-full mr-2.5 mt-0.5`,children:e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${r.iconColor}`})}),e.jsx("span",{className:"text-gray-700",children:i})]},l))})]})]})},lt=({categoryScores:s})=>{const[t,a]=x.useState(null),r=Object.entries(s).map(([n,g])=>({name:n,score:g,formattedName:n.length>15?`${n.substring(0,15)}...`:n})),i=n=>n>=75?"#ef4444":n>=50?"#f97316":n>=25?"#eab308":"#22c55e",l=n=>n>=75?"High Risk":n>=50?"Moderate Risk":n>=25?"Low Risk":"Minimal Risk",c=n=>({"Screen Time":"Measures your daily device usage patterns and ability to disconnect.","Social Media":"Evaluates your relationship with social platforms and their impact on your well-being.","Sleep Impact":"Assesses how technology affects your sleep quality and patterns.","Physical Health":"Examines how digital habits impact your physical activity and health.","Mental Health Effects":"Measures technology's influence on your mental and emotional state.",Productivity:"Evaluates how digital habits impact your work and study effectiveness.","Digital Well-being":"Overall assessment of your relationship with technology.",Relationships:"How technology affects your interpersonal connections."})[n]||"This category measures specific aspects of your digital wellness.",o=n=>{a(t===n?null:n)},h=({active:n,payload:g})=>{if(n&&g&&g.length){const u=g[0].payload;return e.jsxs("div",{className:"bg-white p-3 rounded-md shadow-md border border-gray-200",children:[e.jsx("p",{className:"font-medium text-gray-800",children:u.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Score:"," ",e.jsxs("span",{className:"font-medium",style:{color:i(u.score)},children:[u.score,"%"]})]}),e.jsx("p",{className:"text-xs mt-1",style:{color:i(u.score)},children:l(u.score)})]})}return null};return e.jsxs(m.div,{className:"bg-white rounded-xl shadow-md border border-gray-100 p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1},children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-5",children:"Category Breakdown"}),r.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-72 mb-6",children:e.jsx(Ie,{width:"100%",height:"100%",children:e.jsxs(ls,{data:r,margin:{top:20,right:30,left:20,bottom:40},barSize:40,children:[e.jsx(cs,{strokeDasharray:"3 3",vertical:!1,opacity:.3}),e.jsx(ds,{dataKey:"formattedName",angle:-45,textAnchor:"end",height:70,interval:0,tick:{fontSize:12,fill:"#6b7280"}}),e.jsx(ms,{domain:[0,100],tick:{fontSize:12,fill:"#6b7280"},tickFormatter:n=>`${n}%`}),e.jsx(Le,{content:e.jsx(h,{})}),e.jsxs(us,{dataKey:"score",name:"Risk Score",radius:[4,4,0,0],children:[r.map((n,g)=>e.jsx(De,{fill:i(n.score)},`cell-${g}`)),e.jsx(xs,{dataKey:"score",position:"top",formatter:n=>`${n}%`})]})]})})}),e.jsx("div",{className:"space-y-4",children:r.map(n=>e.jsxs("div",{className:"bg-gray-50 rounded-lg overflow-hidden border border-gray-100",children:[e.jsxs("div",{className:"p-4 cursor-pointer",onClick:()=>o(n.name),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-medium text-gray-800",children:n.name}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"text-sm font-semibold mr-2",style:{color:i(n.score)},children:[n.score,"%"]}),e.jsx(m.div,{animate:{rotate:t===n.name?180:0},transition:{duration:.2},children:e.jsx(Me,{size:18,className:"text-gray-500"})})]})]}),e.jsx("div",{className:"mt-2 flex items-center",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx(m.div,{className:"h-2 rounded-full",style:{backgroundColor:i(n.score)},initial:{width:0},animate:{width:`${n.score}%`},transition:{duration:.8,delay:.2}})})})]}),e.jsx(Pe,{children:t===n.name&&e.jsx(m.div,{className:"px-4 pb-4",initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},children:e.jsx("div",{className:"pt-2 border-t border-gray-200 mt-2",children:e.jsxs("div",{className:"flex items-start mt-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full mt-1.5 mr-2 flex-shrink-0",style:{backgroundColor:i(n.score)}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:l(n.score)}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:c(n.name)})]})]})})})})]},n.name))})]}):e.jsx("div",{className:"flex items-center justify-center h-64 bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-gray-500",children:"No category data available"})})]})},ct=({riskLevel:s})=>{const a=(i=>{switch(i){case"low":return[{action:"Maintain current healthy digital boundaries",timeframe:"Ongoing",difficulty:"easy"},{action:"Set goals for continued improvement",timeframe:"This week",difficulty:"medium"},{action:"Share your success strategies with others",timeframe:"This month",difficulty:"easy"},{action:"Track your progress with monthly check-ins",timeframe:"Monthly",difficulty:"easy"}];case"moderate":return[{action:"Implement screen time limits on social media apps",timeframe:"Today",difficulty:"medium"},{action:"Create designated tech-free zones",timeframe:"This week",difficulty:"medium"},{action:"Practice mindful device usage during meals",timeframe:"Daily",difficulty:"easy"},{action:"Schedule a weekly digital detox day",timeframe:"Weekly",difficulty:"hard"}];case"high":return[{action:"Schedule regular digital detox periods",timeframe:"Today",difficulty:"hard"},{action:"Use app blocking tools during work hours",timeframe:"This week",difficulty:"medium"},{action:"Seek support from friends or family",timeframe:"This week",difficulty:"medium"},{action:"Replace one hour of screen time with physical activity daily",timeframe:"Daily",difficulty:"hard"}];case"severe":return[{action:"Set up strict device usage limitations",timeframe:"Today",difficulty:"hard"},{action:"Seek professional support for digital dependency",timeframe:"This week",difficulty:"medium"},{action:"Create a comprehensive plan to reduce screen time",timeframe:"This week",difficulty:"hard"},{action:"Establish accountability with trusted friends or family",timeframe:"This week",difficulty:"medium"}];default:return[]}})(s),r=i=>{switch(i){case"easy":return"bg-green-100 text-green-700 border-green-200";case"medium":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"hard":return"bg-orange-100 text-orange-700 border-orange-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}};return e.jsxs(m.div,{className:"bg-white rounded-xl shadow-md border border-gray-100 p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2},children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Your Action Plan"}),e.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Export Plan"})]}),e.jsx("div",{className:"space-y-4",children:a.map((i,l)=>e.jsx(m.div,{className:"bg-gray-50 rounded-lg p-4 border border-gray-100",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*l},whileHover:{y:-2,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"bg-blue-100 rounded-full p-1.5 mt-0.5 mr-3 flex-shrink-0",children:e.jsx(me,{className:"text-blue-600 w-4 h-4"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-1",children:[e.jsx("h3",{className:"font-medium text-gray-800",children:i.action}),e.jsx("div",{className:`text-xs px-2 py-0.5 rounded-full border ${r(i.difficulty)}`,children:i.difficulty.charAt(0).toUpperCase()+i.difficulty.slice(1)})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(J,{size:14,className:"mr-1"}),e.jsxs("span",{children:["Start: ",i.timeframe]}),e.jsx(xe,{size:14,className:"ml-3 mr-1"}),e.jsxs("span",{children:["Frequency:"," ",i.timeframe==="Today"||i.timeframe==="This week"||i.timeframe==="This month"?"Once":i.timeframe]})]})]})]})},l))})]})},dt=()=>{const{state:s,calculateResults:t,resetAssessment:a,markResultsSaved:r,startAssessment:i}=fe(),{state:l}=Q(),c=P(),[o,h]=x.useState(!0),n=t();x.useEffect(()=>{!s.isComplete&&s.answers.length===0&&c("/assessment")},[s,c]),x.useEffect(()=>{const d=setTimeout(()=>{h(!1)},2e3);return()=>clearTimeout(d)},[]),x.useEffect(()=>{!o&&s.isComplete&&s.completionTime&&!s.resultsSaved&&(s.currentAssessment?.id?B.post("/api/results",{assessment_id:s.currentAssessment.id,overall_score:n.overallScore,category_scores:n.categoryScores,risk_level:n.riskLevel}).then(()=>{r()}).catch(d=>{console.error("Error saving results:",d),r()}):r())},[o,s.isComplete,s.completionTime,s.resultsSaved,n,r,s.currentAssessment]);const g=async()=>{try{a(),await i(),c("/assessment")}catch(d){console.error("Error starting new assessment:",d)}},u=()=>{const d=new hs,b=l.user?.firstName||"",y=l.user?.lastName||"",w=`${b} ${y}`.trim()||"User",S=s.completionTime?s.completionTime.toLocaleDateString():new Date().toLocaleDateString(),E=n.riskLevel.charAt(0).toUpperCase()+n.riskLevel.slice(1);d.setFontSize(22),d.setTextColor(37,99,235),d.text("DigiWise Digital Wellness Assessment",105,25,{align:"center"}),d.setFontSize(12),d.setTextColor(75,85,99),d.text("Your personalized digital wellness report",105,35,{align:"center"}),d.setFontSize(10),d.setTextColor(31,41,55),d.text(`Name: ${w}`,20,55),d.text(`Date: ${S}`,20,65),d.text(`Overall Score: ${n.overallScore}%`,20,75),d.text(`Risk Level: ${E}`,20,85);const v=["Low","Moderate","High","Severe"],z=v.findIndex(k=>k.toLowerCase()===n.riskLevel.toLowerCase()),p=160/v.length;v.forEach((k,I)=>{const $=I===z,U=20+I*p;d.setFillColor($?I===0?"#10B981":I===1?"#F59E0B":I===2?"#F97316":"#EF4444":"#E5E7EB"),d.roundedRect(U,95,p-2,10,2,2,"F"),d.setFontSize(8),d.setTextColor($?"#FFFFFF":"#6B7280");const _=d.getTextWidth(k);d.text(k,U+p/2-_/2,102)}),d.setFontSize(14),d.setTextColor(31,41,55),d.text("Category Breakdown",20,125);const C=Object.entries(n.categoryScores).map(([k,I])=>({category:k,score:`${I}%`}));gs(d,{startY:130,head:[["Category","Score"]],body:C.map(k=>[k.category,k.score]),theme:"grid",headStyles:{fillColor:[37,99,235],textColor:255,fontStyle:"bold",halign:"center"},bodyStyles:{textColor:[31,41,55],fontStyle:"normal",lineWidth:.1},alternateRowStyles:{fillColor:[243,244,246]},margin:{left:20,right:20},styles:{fontSize:10,cellPadding:5,overflow:"linebreak",lineWidth:.1},columnStyles:{0:{cellWidth:"auto",halign:"left"},1:{cellWidth:30,halign:"center",fontStyle:"bold"}}});const N=d.lastAutoTable?.finalY||180;d.setFontSize(14),d.text("Recommended Actions",20,N);const Y=f(n.riskLevel);let X=N+10;Y.forEach(k=>{d.setFillColor(37,99,235),d.circle(25,X+3,1.5,"F"),d.setFontSize(10),d.setTextColor(31,41,55),d.text(`${k.action} (${k.timeframe})`,30,X+4),X+=8}),d.setFontSize(9),d.setTextColor(107,114,128),d.text("Thank you for completing the DigiWise Digital Wellness Assessment.",105,280,{align:"center"}),d.text("For more resources and support, visit our website.",105,285,{align:"center"}),d.save(`DigiWise_Results_${w.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.pdf`)},f=d=>{switch(d){case"low":return[{action:"Maintain current healthy digital boundaries",timeframe:"Ongoing"},{action:"Set goals for continued improvement",timeframe:"This week"}];case"moderate":return[{action:"Implement screen time limits on social media apps",timeframe:"Today"},{action:"Create designated tech-free zones",timeframe:"This week"}];case"high":return[{action:"Schedule regular digital detox periods",timeframe:"Today"},{action:"Use app blocking tools during work hours",timeframe:"This week"}];case"severe":return[{action:"Set up strict device usage limitations",timeframe:"Today"},{action:"Seek professional support for digital dependency",timeframe:"This week"}];default:return[]}};return o?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center",children:e.jsxs(m.div,{className:"text-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsxs("div",{className:"relative",children:[e.jsx(m.div,{className:"w-20 h-20 mx-auto mb-6 border-4 border-blue-200 rounded-full",animate:{rotate:360},transition:{duration:2,ease:"linear",repeat:1/0}}),e.jsx(m.div,{className:"w-20 h-20 mx-auto absolute top-0 left-1/2 -ml-10 border-4 border-blue-600 rounded-full border-t-transparent",animate:{rotate:-360},transition:{duration:1.5,ease:"linear",repeat:1/0}})]}),e.jsx(m.h2,{className:"text-2xl font-bold text-gray-800 mb-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:"Computing Your Results"}),e.jsx(m.p,{className:"text-gray-600",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:"Analyzing your responses to generate personalized insights..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50",role:"main","aria-label":"Assessment Results",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-white backdrop-blur-md bg-opacity-95 border-b border-gray-100 shadow-sm",children:e.jsxs("div",{className:"container mx-auto px-4 py-3 flex items-center justify-between",children:[e.jsxs(A,{to:"/",className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center shadow-sm mr-2",children:e.jsx(je,{size:16,className:"text-white"})}),e.jsx("h1",{className:"text-xl font-semibold text-gray-800 hidden sm:block",children:"Digital Wellness Results"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(m.button,{className:"flex items-center px-2.5 py-1.5 text-gray-600 hover:text-gray-800 bg-gray-100 hover:bg-gray-200 rounded-full transition-colors md:px-3.5 md:py-1.5",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:g,children:[e.jsx(we,{size:16,className:"md:mr-1"}),e.jsx("span",{className:"hidden md:inline",children:"Take Again"})]}),e.jsxs(m.button,{className:"flex items-center px-2.5 py-1.5 text-gray-600 hover:text-gray-800 bg-gray-100 hover:bg-gray-200 rounded-full transition-colors md:px-3.5 md:py-1.5",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:u,children:[e.jsx(he,{size:16,className:"md:mr-1"}),e.jsx("span",{className:"hidden md:inline",children:"Download"})]}),e.jsx(A,{to:"/",children:e.jsxs(m.button,{className:"flex items-center px-3 py-1.5 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(je,{size:16,className:"mr-1.5"}),e.jsx("span",{children:"Home"})]})})]})]})}),e.jsxs(m.div,{className:"container mx-auto px-4 py-8 max-w-5xl",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:[e.jsx(nt,{score:n.overallScore,riskLevel:n.riskLevel,completionDate:s.completionTime||new Date,firstName:s.userInfo?.firstName}),e.jsxs("div",{className:"space-y-6 mt-8",children:[e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.4},children:e.jsx(ot,{riskLevel:n.riskLevel,score:n.overallScore})}),e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.4},children:e.jsx(lt,{categoryScores:n.categoryScores})}),e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.4},children:e.jsx(ct,{riskLevel:n.riskLevel})})]}),e.jsxs(m.div,{className:"mt-8 pt-4 border-t border-gray-200 flex justify-between items-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.4},children:[e.jsx(A,{to:"/",children:e.jsxs(m.button,{className:"flex items-center px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",whileHover:{x:-3},children:[e.jsx(Te,{size:16,className:"mr-1.5"}),e.jsx("span",{children:"Back to home page"})]})}),e.jsxs(m.button,{onClick:g,className:"flex items-center px-4 py-2 text-blue-600 hover:text-blue-800 transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(we,{size:16,className:"mr-1.5"}),e.jsx("span",{children:"Take Assessment Again"})]})]})]})]})},mt=()=>e.jsxs("section",{className:"py-24 bg-gradient-to-br from-blue-50 to-white relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-1/4 w-64 h-64 bg-blue-100 rounded-full mix-blend-multiply filter blur-3xl opacity-30"}),e.jsx("div",{className:"absolute bottom-0 right-1/3 w-80 h-80 bg-indigo-100 rounded-full mix-blend-multiply filter blur-3xl opacity-30"})]}),e.jsx("div",{className:"container mx-auto px-4 text-center relative z-10",children:e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:[e.jsx("div",{className:"inline-block px-3 py-1 mb-6 rounded-full bg-blue-100 text-blue-700 text-sm font-medium",children:"Our Mission & Vision"}),e.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-gray-800 mb-6",children:["About ",e.jsx("span",{className:"text-blue-600",children:"DigiWise"})]}),e.jsx("p",{className:"text-xl md:text-2xl text-gray-600 max-w-3xl mx-auto",children:"Empowering Digital Wellness Through Science-Based Assessment"}),e.jsx(m.div,{className:"mt-12 max-w-4xl mx-auto",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.3,duration:.8},children:e.jsx("div",{className:"bg-white bg-opacity-90 backdrop-filter backdrop-blur-sm rounded-xl shadow-xl p-8 border border-gray-100",children:e.jsx("p",{className:"text-lg text-gray-700 leading-relaxed",children:"DigiWise is a pioneering digital wellness platform designed to help individuals understand and improve their relationship with technology. Through our scientifically-validated assessment and personalized recommendations, we empower users to develop healthier digital habits and achieve better overall wellbeing."})})})]})})]}),ut=()=>{const s=[{id:1,name:"Scientific Rigor",description:"Research-backed methodologies",icon:e.jsx(ps,{size:32,className:"text-blue-600"}),color:"bg-blue-50",borderColor:"border-blue-100"},{id:2,name:"Accessibility",description:"Free tools for all Filipinos",icon:e.jsx(ze,{size:32,className:"text-indigo-600"}),color:"bg-indigo-50",borderColor:"border-indigo-100"},{id:3,name:"Privacy",description:"Secure, confidential assessments",icon:e.jsx(fs,{size:32,className:"text-emerald-600"}),color:"bg-emerald-50",borderColor:"border-emerald-100"},{id:4,name:"Education",description:"Continuous learning and improvement",icon:e.jsx(q,{size:32,className:"text-amber-600"}),color:"bg-amber-50",borderColor:"border-amber-100"}],t={hidden:{},show:{transition:{staggerChildren:.1}}},a={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.5}}};return e.jsx("section",{className:"py-20 bg-white",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 max-w-5xl mx-auto mb-20",children:[e.jsx(m.div,{className:"md:w-1/2",initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6},children:e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-8 rounded-2xl shadow-sm border border-blue-100 h-full",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-blue-100 mb-4",children:e.jsx("span",{className:"text-blue-600 text-lg font-bold",children:"M"})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Our Mission"}),e.jsx("p",{className:"text-xl text-gray-700 italic leading-relaxed",children:'"To promote digital wellness and healthy technology habits among Filipinos through evidence-based assessment and education."'})]})}),e.jsx(m.div,{className:"md:w-1/2",initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6,delay:.2},children:e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 p-8 rounded-2xl shadow-sm border border-indigo-100 h-full",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-indigo-100 mb-4",children:e.jsx("span",{className:"text-indigo-600 text-lg font-bold",children:"V"})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Our Vision"}),e.jsx("p",{className:"text-xl text-gray-700 italic leading-relaxed",children:'"A digitally literate society where technology enhances rather than hinders mental health and well-being."'})]})})]}),e.jsxs(m.div,{className:"text-center mb-16",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Our Values"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"The core principles that guide everything we do at DigiWise"})]}),e.jsx(m.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",variants:t,initial:"hidden",whileInView:"show",viewport:{once:!0},children:s.map(r=>e.jsxs(m.div,{variants:a,whileHover:{y:-5,transition:{duration:.2}},className:`${r.color} rounded-xl border ${r.borderColor} p-8 shadow-sm hover:shadow-md transition-all duration-300 text-center`,children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-3 bg-white rounded-full shadow-sm",children:r.icon})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:r.name}),e.jsx("p",{className:"text-gray-600",children:r.description})]},r.id))})]})})},xt=()=>{const[s,t]=x.useState("green"),a=[{id:"green",name:"Green (Little to No Risk)",color:"bg-green-500",textColor:"text-green-700",bgColor:"bg-green-50",borderColor:"border-green-200",description:"Healthy digital habits with minimal negative impact",characteristics:["Balanced screen time","Good sleep hygiene","Positive relationships","Mindful technology use"]},{id:"yellow",name:"Yellow (Low to Moderate Risk)",color:"bg-yellow-500",textColor:"text-yellow-700",bgColor:"bg-yellow-50",borderColor:"border-yellow-200",description:"Some concerning patterns emerging",characteristics:["Occasional digital overwhelm","Minor sleep disruption","Some difficulty disconnecting","Mild anxiety when separated from devices"]},{id:"orange",name:"Orange (Concerning Risk)",color:"bg-orange-500",textColor:"text-orange-700",bgColor:"bg-orange-50",borderColor:"border-orange-200",description:"Clear negative impacts on daily life",characteristics:["Difficulty concentrating","Relationship strain","Mood changes","Productivity impacts"]},{id:"red",name:"Red (Serious Risk)",color:"bg-red-500",textColor:"text-red-700",bgColor:"bg-red-50",borderColor:"border-red-200",description:"Significant digital wellness concerns requiring attention",characteristics:["Severe impact on mental health","Work/school performance issues","Relationship conflicts","Physical symptoms (headaches, eye strain, etc.)"]}],r=i=>{t(s===i?null:i)};return e.jsx("section",{className:"py-20 bg-white",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs(m.div,{className:"text-center max-w-3xl mx-auto mb-16",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-800 mb-4",children:"Risk Levels Deep Dive"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Understanding the spectrum of digital wellness and potential concerns"})]}),e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"relative mb-10",children:[e.jsxs("div",{className:"h-2 w-full bg-gray-200 rounded-full",children:[e.jsx("div",{className:"absolute left-0 w-1/4 h-2 bg-green-500 rounded-l-full"}),e.jsx("div",{className:"absolute left-1/4 w-1/4 h-2 bg-yellow-500"}),e.jsx("div",{className:"absolute left-2/4 w-1/4 h-2 bg-orange-500"}),e.jsx("div",{className:"absolute left-3/4 w-1/4 h-2 bg-red-500 rounded-r-full"})]}),e.jsxs("div",{className:"flex justify-between mt-2 text-xs text-gray-600 font-medium",children:[e.jsx("span",{children:"Little to No Risk"}),e.jsx("span",{children:"Low Risk"}),e.jsx("span",{children:"Moderate Risk"}),e.jsx("span",{children:"High Risk"})]})]}),e.jsx("div",{className:"space-y-4",children:a.map(i=>e.jsxs(m.div,{className:`border rounded-xl overflow-hidden shadow-sm transition-all duration-300 ${i.borderColor} ${s===i.id?"shadow-md":""}`,initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.4},children:[e.jsx(m.div,{className:`p-5 ${i.bgColor} cursor-pointer`,onClick:()=>r(i.id),whileHover:{backgroundColor:s===i.id?"":"#f9fafb"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-5 h-5 rounded-full ${i.color} mr-3`,"aria-hidden":"true"}),e.jsx("h3",{className:`text-lg font-semibold ${i.textColor}`,children:i.name})]}),e.jsx(m.div,{animate:{rotate:s===i.id?180:0},transition:{duration:.3},children:e.jsx(Me,{className:"text-gray-500",size:20})})]})}),e.jsx(Pe,{children:s===i.id&&e.jsx(m.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:e.jsxs("div",{className:"p-6 border-t border-gray-100",children:[e.jsx("p",{className:"text-gray-700 font-medium mb-5",children:i.description}),e.jsxs("div",{className:"mb-5",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-600 uppercase mb-3",children:"Characteristics"}),e.jsx("ul",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:i.characteristics.map((l,c)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx("div",{className:`w-2 h-2 ${i.color} rounded-full mr-2`}),e.jsx("span",{className:"text-gray-700",children:l})]},c))})]})]})})})]},i.id))}),e.jsx(m.div,{className:"mt-10 text-center",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.4},children:e.jsx("div",{className:"inline-block px-4 py-2 bg-blue-50 text-blue-700 rounded-full text-sm font-medium",children:"Click on each risk level to learn more"})})]})]})})},ht=()=>e.jsx("section",{className:"py-20 bg-gradient-to-b from-white to-gray-50",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs(m.div,{className:"text-center max-w-3xl mx-auto mb-16",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Behind DigiWise"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Bringing together expertise in digital wellness research and technology"})]}),e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-stretch justify-center gap-8 md:gap-16",children:[e.jsx(m.div,{className:"w-full md:w-1/2",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 rounded-xl overflow-hidden shadow-lg border border-indigo-100 p-8 flex flex-col items-center justify-center h-full",children:[e.jsx("div",{className:"w-24 h-24 bg-white rounded-full flex items-center justify-center shadow-sm mb-6",children:e.jsx("span",{className:"text-blue-600 text-4xl font-bold",children:"AR"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"ArnAaron C Rivera"}),e.jsx("p",{className:"text-blue-600 font-medium mb-4",children:"Researcher"}),e.jsx("p",{className:"text-gray-700 text-center",children:"Division of San Jose City Public School Teacher"})]})}),e.jsx(m.div,{className:"w-full md:w-1/2",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.2},children:e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl overflow-hidden shadow-lg border border-blue-100 p-8 flex flex-col items-center justify-center h-full",children:[e.jsx("div",{className:"w-24 h-24 bg-white rounded-full flex items-center justify-center shadow-sm mb-6",children:e.jsx("span",{className:"text-blue-600 text-4xl font-bold",children:"TP"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"TechPro360 Solutions"}),e.jsx("p",{className:"text-gray-700 text-center",children:"Transforming visions into reality through customized web-based IT solutions that empower businesses to thrive in the digital landscape. We turn complex challenges into streamlined solutions."}),e.jsx("div",{className:"mt-6 pt-6 border-t border-blue-100 w-full text-center",children:e.jsxs("a",{href:"https://www.techpro360solutions.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 font-medium flex items-center justify-center gap-2 hover:underline",children:[e.jsx(ze,{size:16}),"www.techpro360solutions.com"]})})]})})]})})]})}),gt=()=>e.jsxs("div",{className:"flex flex-col min-h-screen bg-white",children:[e.jsx(ge,{}),e.jsxs("main",{className:"flex-grow",children:[e.jsx(mt,{}),e.jsx(ut,{}),e.jsx(xt,{}),e.jsx(ht,{})]}),e.jsx(pe,{})]}),pt=({searchQuery:s,onSearch:t,filters:a,onFilterChange:r})=>{const[i,l]=x.useState(!1),c=()=>{l(!i)};return e.jsx("section",{className:"bg-gradient-to-br from-blue-50 to-white py-12 px-4",children:e.jsxs("div",{className:"container mx-auto max-w-6xl",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-800 mb-4 text-center",children:"Digital Wellness Resources"}),e.jsx("p",{className:"text-xl text-gray-600 mb-6 text-center max-w-3xl mx-auto",children:"Evidence-based tools and materials to support your digital wellness journey"}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 mb-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-grow relative",children:[e.jsx("input",{type:"text",placeholder:"Find resources by topic or keyword",className:"w-full pl-10 pr-4 py-3 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:s,onChange:o=>t(o.target.value),"aria-label":"Search resources"}),e.jsx(bs,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]}),e.jsxs("button",{onClick:c,className:"flex items-center justify-center px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors md:w-auto","aria-expanded":i,"aria-controls":"filter-panel",children:[e.jsx(ys,{size:20,className:"mr-2"}),e.jsx("span",{children:"Filters"})]})]}),i&&e.jsxs("div",{id:"filter-panel",className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t border-gray-100 animate-fadeIn",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Risk Level"}),e.jsxs("select",{className:"w-full p-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:a.riskLevel,onChange:o=>r("riskLevel",o.target.value),"aria-label":"Filter by risk level",children:[e.jsx("option",{value:"all",children:"All Risk Levels"}),e.jsx("option",{value:"green",children:"Green (Little to No Risk)"}),e.jsx("option",{value:"yellow",children:"Yellow (Low to Moderate Risk)"}),e.jsx("option",{value:"orange",children:"Orange (Concerning Risk)"}),e.jsx("option",{value:"red",children:"Red (Serious Risk)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content Type"}),e.jsxs("select",{className:"w-full p-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:a.contentType,onChange:o=>r("contentType",o.target.value),"aria-label":"Filter by content type",children:[e.jsx("option",{value:"all",children:"All Content Types"}),e.jsx("option",{value:"article",children:"Articles"}),e.jsx("option",{value:"video",children:"Videos"}),e.jsx("option",{value:"pdf",children:"PDF Guides"}),e.jsx("option",{value:"worksheet",children:"Worksheets"}),e.jsx("option",{value:"tool",children:"Interactive Tools"}),e.jsx("option",{value:"course",children:"Courses"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Age Group"}),e.jsxs("select",{className:"w-full p-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:a.ageGroup,onChange:o=>r("ageGroup",o.target.value),"aria-label":"Filter by age group",children:[e.jsx("option",{value:"all",children:"All Age Groups"}),e.jsx("option",{value:"elementary",children:"Elementary (K-6)"}),e.jsx("option",{value:"middle",children:"Middle School (7-9)"}),e.jsx("option",{value:"high",children:"High School (10-12)"}),e.jsx("option",{value:"adult",children:"Adults & Parents"})]})]})]})]})]})})},ft=({activeCategory:s,onCategoryChange:t})=>{const a=[{id:"all",name:"All Resources",locked:!0},{id:"deped",name:"DepEd Materials",locked:!1},{id:"students",name:"For Students",locked:!0},{id:"parents",name:"For Parents",locked:!0},{id:"educators",name:"For Educators",locked:!0},{id:"risk-level",name:"By Risk Level",locked:!0}];return e.jsx("section",{className:"bg-white border-b border-gray-200 sticky top-16 z-10 shadow-sm",children:e.jsx("div",{className:"container mx-auto max-w-6xl",children:e.jsx("div",{className:"overflow-x-auto py-1",children:e.jsx("div",{className:"flex whitespace-nowrap min-w-max px-4",children:a.map(r=>e.jsxs("button",{className:`px-4 py-3 text-sm font-medium transition-colors flex items-center ${s===r.id?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-blue-600"} ${r.locked&&r.id!==s?"opacity-70":""}`,onClick:()=>!r.locked&&t(r.id),"aria-current":s===r.id?"page":void 0,disabled:r.locked&&r.id!=="deped",children:[r.name,r.locked&&r.id!=="deped"&&e.jsx(js,{size:14,className:"ml-1.5 opacity-70"})]},r.id))})})})})},bt=({rating:s,reviewCount:t,size:a="small"})=>{const r=Array(5).fill(0).map((c,o)=>o<Math.floor(s)?"full":o<Math.ceil(s)&&!Number.isInteger(s)?"half":"empty"),i=a==="small"?14:18,l=a==="small"?"text-xs":"text-sm";return e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex mr-1",children:r.map((c,o)=>e.jsx(ws,{size:i,className:`${c==="full"?"text-yellow-400 fill-current":c==="half"?"text-yellow-400":"text-gray-300"}`},o))}),e.jsxs("span",{className:`${l} text-gray-500`,children:["(",t,")"]})]})},Se=({title:s,description:t,type:a,thumbnail:r,riskLevel:i,timeInvestment:l,difficultyLevel:c,rating:o,reviewCount:h,link:n})=>{const g=()=>{switch(a){case"video":return e.jsx(vs,{size:16,className:"mr-1"});case"pdf":case"worksheet":return e.jsx(ne,{size:16,className:"mr-1"});case"link":return e.jsx(ve,{size:16,className:"mr-1"});case"tool":return e.jsx(he,{size:16,className:"mr-1"});default:return e.jsx(ne,{size:16,className:"mr-1"})}},u=()=>{switch(l){case"quick":return"Quick read";case"medium":return"30-min activity";case"comprehensive":return"Comprehensive";default:return"Quick read"}},f=()=>{switch(i){case"green":return"bg-green-500";case"yellow":return"bg-yellow-500";case"orange":return"bg-orange-500";case"red":return"bg-red-500";default:return"bg-gray-300"}},d=e.jsxs(e.Fragment,{children:[r&&e.jsx("div",{className:"h-40 overflow-hidden",children:e.jsx("img",{src:r,alt:s,className:"w-full h-full object-cover object-center"})}),e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[i&&e.jsxs("div",{className:"flex items-center mr-2",children:[e.jsx("span",{className:`w-3 h-3 ${f()} rounded-full mr-1`}),e.jsxs("span",{className:"text-xs text-gray-500 capitalize",children:[i," Level"]})]}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[g(),e.jsx("span",{className:"capitalize",children:a})]})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:s}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:t}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(J,{size:14,className:"text-gray-400 mr-1"}),e.jsx("span",{className:"text-xs text-gray-500",children:u()}),e.jsx("span",{className:"mx-2 text-gray-300",children:"â¢"}),e.jsx("span",{className:"text-xs text-gray-500 capitalize",children:c})]}),e.jsx(bt,{rating:o,reviewCount:h})]}),n&&e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("span",{className:"text-blue-600 text-sm font-medium flex items-center",children:["View Resource ",e.jsx(ve,{size:14,className:"ml-1"})]})})]})]});return n?e.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow overflow-hidden border border-gray-100 block",children:d}):e.jsx("div",{className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow overflow-hidden border border-gray-100",children:d})},yt=["green","yellow","orange","red"];function ke(s){return yt.includes(s)?s:null}const jt=({searchQuery:s,filters:t})=>{const r=[{id:"ed-1",category:"empowerment",title:"Empowerment Technologies for the Strand",description:"A core subject for SHS students covering responsible use of technology and online behavior. Discusses internet addiction, gaming disorder, and screen time balance.",type:"pdf",thumbnail:"https://images.unsplash.com/photo-1516321318423-f06f85e504b3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",ageGroup:"high",timeInvestment:"comprehensive",difficultyLevel:"intermediate",rating:4.8,reviewCount:56,featured:!0,link:"https://www.deped.gov.ph/wp-content/uploads/2019/01/SHS-Applied_Empowerment-Technologies-for-the-Strand.pdf",riskLevel:"yellow"},{id:"cyber-1",category:"cybersafe",title:"#BeCyberSafe: Online Gaming Addiction",description:"Educational materials on online gaming addiction for Grade 5 up to Junior High, applicable for SHS. Teaches how excessive gaming affects studies, relationships, and mental health.",type:"pdf",thumbnail:"https://images.unsplash.com/photo-1542751371-adc38448a05e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",ageGroup:"middle",timeInvestment:"medium",difficultyLevel:"beginner",rating:4.7,reviewCount:48,featured:!0,link:"https://www.deped.gov.ph/alternative-learning-system/resources/downloads/becybersafe/",riskLevel:"orange"},{id:"digital-1",category:"digital-literacy",title:"Digital Literacy in ALS (Learning Strand 6)",description:"Though designed for ALS learners, these materials teach ethical digital use and critical thinking about technology use, including risks of online dependency and addiction.",type:"pdf",thumbnail:"https://images.unsplash.com/photo-1516321165247-4aa89a48be28?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",ageGroup:"high",timeInvestment:"comprehensive",difficultyLevel:"intermediate",rating:4.8,reviewCount:52,featured:!0,link:"https://www.deped.gov.ph/wp-content/uploads/2019/01/LS-6-Digital-Literacy.pdf",riskLevel:"green"},{id:"ed-2",category:"empowerment",title:"Screen Time Management for Elementary Students",description:"Age-appropriate materials for teaching younger students about healthy screen time habits and digital wellness concepts.",type:"video",thumbnail:"https://images.unsplash.com/photo-1611162616305-c69b3fa7fbe0?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",ageGroup:"elementary",timeInvestment:"quick",difficultyLevel:"beginner",rating:4.6,reviewCount:42,featured:!1,link:"https://www.deped.gov.ph/digital-wellness",riskLevel:"green"},{id:"ed-3",category:"cybersafe",title:"Advanced Digital Wellness Strategies",description:"In-depth guide for educators and parents on addressing serious digital dependency issues and implementing effective interventions.",type:"worksheet",thumbnail:"https://images.unsplash.com/photo-1552581234-26160f608093?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",ageGroup:"adult",timeInvestment:"comprehensive",difficultyLevel:"advanced",rating:4.9,reviewCount:36,featured:!1,link:"https://www.deped.gov.ph/digital-wellness/advanced",riskLevel:"red"}].filter(c=>{if(s&&s.trim()!==""){const o=s.toLowerCase(),h=c.title.toLowerCase().includes(o),n=c.description.toLowerCase().includes(o);if(!h&&!n)return!1}return!(t.contentType!=="all"&&c.type!==t.contentType||t.ageGroup!=="all"&&c.ageGroup!==t.ageGroup||t.riskLevel!=="all"&&c.riskLevel!==t.riskLevel)}),i=r.filter(c=>c.featured),l=r.filter(c=>!c.featured);return e.jsx("section",{className:"py-12 px-4",children:e.jsxs("div",{className:"container mx-auto max-w-6xl",children:[e.jsxs("div",{className:"flex items-center mb-8",children:[e.jsx(q,{size:24,className:"text-blue-600 mr-3"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Department of Education Resources"})]}),s||t.contentType!=="all"||t.ageGroup!=="all"||t.riskLevel!=="all"?e.jsx("div",{className:"mb-6 p-3 bg-gray-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",r.length," resources",s?` matching "${s}"`:"",t.contentType!=="all"?` of type "${t.contentType}"`:"",t.ageGroup!=="all"?` for "${t.ageGroup}" age group`:"",t.riskLevel!=="all"?` with "${t.riskLevel}" risk level`:""]})}):null,i.length>0&&e.jsxs("div",{className:"mb-12",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h3",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[e.jsx(Ns,{className:"w-5 h-5 text-amber-500 mr-2"}),"Featured DepEd Materials for Gaming & Digital Wellness"]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:i.map(c=>e.jsx(m.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5},children:e.jsx(Se,{...c,riskLevel:ke(c.riskLevel)},c.id)},c.id))})]}),l.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Additional Resources"})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:l.map(c=>e.jsx(m.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5},children:e.jsx(Se,{...c,riskLevel:ke(c.riskLevel)},c.id)},c.id))})]}),r.length===0&&e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-gray-500 mb-2",children:"No resources match your search criteria."}),e.jsx("button",{className:"text-blue-600 hover:text-blue-800 font-medium",onClick:()=>{window.location.reload()},children:"Clear filters"})]})]})})},wt=()=>{const[s,t]=x.useState("deped"),[a,r]=x.useState(""),[i,l]=x.useState({riskLevel:"all",contentType:"all",ageGroup:"all"}),c=n=>{n==="deped"&&(t(n),window.scrollTo({top:0,behavior:"smooth"}))},o=n=>{r(n)},h=(n,g)=>{l(u=>({...u,[n]:g}))};return x.useEffect(()=>{t("deped")},[]),e.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[e.jsx(ge,{}),e.jsxs("main",{className:"flex-grow",children:[e.jsx(pt,{searchQuery:a,onSearch:o,filters:i,onFilterChange:h}),e.jsx(ft,{activeCategory:s,onCategoryChange:c}),e.jsx(jt,{searchQuery:a,filters:i})]}),e.jsx(pe,{})]})},vt=()=>{const s=P(),{login:t,register:a}=Q(),[r,i]=x.useState(!0),[l,c]=x.useState({first_name:"",last_name:"",email:"",password:"",region:"",age_range:""}),[o,h]=x.useState({}),[n,g]=x.useState(""),[u,f]=x.useState(!1),d=w=>{const{name:S,value:E}=w.target;c(v=>({...v,[S]:E})),o[S]&&h(v=>({...v,[S]:""}))},b=()=>{const w={};return r||(l.first_name.trim()||(w.first_name="First name is required"),l.last_name.trim()||(w.last_name="Last name is required"),l.region||(w.region="Please select your region"),l.age_range||(w.age_range="Please select your age range")),l.email.trim()?/^\S+@\S+\.\S+$/.test(l.email)||(w.email="Please enter a valid email"):w.email="Email is required",l.password.trim()?l.password.length<6&&(w.password="Password must be at least 6 characters"):w.password="Password is required",h(w),Object.keys(w).length===0},y=async w=>{if(w.preventDefault(),g(""),!!b()){f(!0);try{if(r)(await t(l.email,l.password))?.success&&(s("/assessment"),window.location.reload());else{const S={...l,role:"user"};console.log("Attempting registration with data:",S);const E=await a(S);E?.success?(console.log("Registration successful, navigating to assessment..."),setTimeout(()=>{s("/assessment"),window.location.reload()},100)):console.error("Registration failed:",E)}}catch(S){g(S.message||(r?"Login failed":"Registration failed")),f(!1)}}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs(m.div,{className:"bg-white rounded-xl shadow-xl overflow-hidden",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-8 text-white",children:[e.jsx("h2",{className:"text-2xl font-bold text-center",children:r?"Welcome Back":"Create Your Account"}),e.jsx("p",{className:"mt-2 text-center text-blue-100",children:r?"Sign in to continue your assessment":"Join us to start your digital wellness journey"})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[!r&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"First Name"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Ne,{size:16,className:"text-gray-400"})}),e.jsx("input",{type:"text",name:"first_name",value:l.first_name,onChange:d,className:`block w-full pl-10 pr-3 py-2 border ${o.first_name?"border-red-500 bg-red-50":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500`,placeholder:"John"}),o.first_name&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:o.first_name})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Last Name"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Ne,{size:16,className:"text-gray-400"})}),e.jsx("input",{type:"text",name:"last_name",value:l.last_name,onChange:d,className:`block w-full pl-10 pr-3 py-2 border ${o.last_name?"border-red-500 bg-red-50":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500`,placeholder:"Doe"}),o.last_name&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:o.last_name})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Region"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Ss,{size:16,className:"text-gray-400"})}),e.jsxs("select",{name:"region",value:l.region,onChange:d,className:`block w-full pl-10 pr-3 py-2 border ${o.region?"border-red-500 bg-red-50":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500`,children:[e.jsx("option",{value:"",children:"Select your region"}),e.jsx("option",{value:"NCR",children:"National Capital Region (NCR)"}),e.jsx("option",{value:"CAR",children:"Cordillera Administrative Region (CAR)"}),e.jsx("option",{value:"Region I",children:"Region I (Ilocos)"}),e.jsx("option",{value:"Region II",children:"Region II (Cagayan Valley)"}),e.jsx("option",{value:"Region III",children:"Region III (Central Luzon)"}),e.jsx("option",{value:"Region IV-A",children:"Region IV-A (CALABARZON)"}),e.jsx("option",{value:"Region IV-B",children:"Region IV-B (MIMAROPA)"}),e.jsx("option",{value:"Region V",children:"Region V (Bicol)"}),e.jsx("option",{value:"Region VI",children:"Region VI (Western Visayas)"}),e.jsx("option",{value:"Region VII",children:"Region VII (Central Visayas)"}),e.jsx("option",{value:"Region VIII",children:"Region VIII (Eastern Visayas)"}),e.jsx("option",{value:"Region IX",children:"Region IX (Zamboanga Peninsula)"}),e.jsx("option",{value:"Region X",children:"Region X (Northern Mindanao)"}),e.jsx("option",{value:"Region XI",children:"Region XI (Davao)"}),e.jsx("option",{value:"Region XII",children:"Region XII (SOCCSKSARGEN)"}),e.jsx("option",{value:"Region XIII",children:"Region XIII (Caraga)"}),e.jsx("option",{value:"BARMM",children:"Bangsamoro (BARMM)"})]}),o.region&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:o.region})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Age Range"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(xe,{size:16,className:"text-gray-400"})}),e.jsxs("select",{name:"age_range",value:l.age_range,onChange:d,className:`block w-full pl-10 pr-3 py-2 border ${o.age_range?"border-red-500 bg-red-50":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500`,children:[e.jsx("option",{value:"",children:"Select your age range"}),e.jsx("option",{value:"13-17",children:"13-17 (High School)"}),e.jsx("option",{value:"18-24",children:"18-24 (College/Young Adult)"}),e.jsx("option",{value:"25-34",children:"25-34 (Young Professional)"}),e.jsx("option",{value:"35-44",children:"35-44 (Mid-career)"}),e.jsx("option",{value:"45-54",children:"45-54 (Mature Adult)"}),e.jsx("option",{value:"55+",children:"55+ (Senior)"})]}),o.age_range&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:o.age_range})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(ks,{size:16,className:"text-gray-400"})}),e.jsx("input",{type:"email",name:"email",value:l.email,onChange:d,className:`block w-full pl-10 pr-3 py-2 border ${o.email?"border-red-500 bg-red-50":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500`,placeholder:"you@example.com"}),o.email&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:o.email})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Cs,{size:16,className:"text-gray-400"})}),e.jsx("input",{type:"password",name:"password",value:l.password,onChange:d,className:`block w-full pl-10 pr-3 py-2 border ${o.password?"border-red-500 bg-red-50":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500`,placeholder:"â¢â¢â¢â¢â¢â¢â¢â¢"}),o.password&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:o.password})]})]}),e.jsx("div",{children:e.jsx(m.button,{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",whileHover:{scale:1.01},whileTap:{scale:.99},disabled:u,children:u?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r?"Signing in...":"Creating account..."]}):e.jsx(e.Fragment,{children:r?e.jsxs(e.Fragment,{children:[e.jsx(As,{size:18,className:"mr-2"}),"Sign In"]}):e.jsxs(e.Fragment,{children:[e.jsx(Rs,{size:18,className:"mr-2"}),"Create Account"]})})})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:()=>i(!r),className:"text-blue-600 hover:text-blue-700 text-sm",disabled:u,children:r?"Don't have an account? Sign up":"Already have an account? Sign in"})}),n&&e.jsx("p",{className:"mt-2 text-sm text-red-500 text-center",children:n})]})]})})})},Nt="http://69.62.74.112:5001/api",oe=M.create({baseURL:Nt,timeout:1e4});oe.interceptors.response.use(s=>s,async s=>{const t=s.config;return s.response?.status===429&&!t._retry?(t._retry=!0,await new Promise(a=>setTimeout(a,2e3)),oe(t)):Promise.reject(s)});const St=async s=>{try{return await oe.post("/admins/register",s)}catch(t){throw t.response?.status===429?new Error("Too many requests. Please wait a moment and try again."):t}},kt=()=>{const s=P(),[t,a]=x.useState({email:"",password:"",firstName:"",lastName:""}),[r,i]=x.useState(""),[l,c]=x.useState(!1),[o,h]=x.useState(0),n=u=>{const{name:f,value:d}=u.target;a(b=>({...b,[f]:d}))},g=async u=>{u.preventDefault(),i(""),c(!0);try{if(!t.email||!t.password||!t.firstName||!t.lastName){i("All fields are required");return}const f=await St({email:t.email,password:t.password,firstName:t.firstName,lastName:t.lastName});f.status===201?(console.log("Admin registration successful:",{email:t.email,timestamp:new Date().toISOString()}),alert("Registration successful! You will be redirected to the login page."),setTimeout(()=>{s("/admin/login",{state:{registrationSuccess:!0,email:t.email},replace:!0})},1500)):i(f.data.message||"Registration failed")}catch(f){f instanceof Error&&f.message.includes("Too many requests")?(i("Too many requests. Please wait a moment and try again."),h(d=>d+1),o>=3&&i("Too many attempts. Please wait a few minutes before trying again.")):typeof f=="object"&&f&&"response"in f&&f.response?.data?.message?i(f.response.data.message||"Registration failed. Please try again."):f instanceof Error?i(f.message||"Registration failed. Please try again."):i("Registration failed. Please try again.")}finally{c(!1)}};return e.jsx(Fe,{component:"main",maxWidth:"xs",children:e.jsx(F,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsxs($e,{elevation:3,sx:{padding:4,display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},children:[e.jsxs(F,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:3},children:[e.jsx(ae,{sx:{fontSize:40,color:"primary.main",mb:1}}),e.jsx(j,{component:"h1",variant:"h5",children:"Admin Registration"})]}),r&&e.jsx(Ue,{severity:"error",sx:{mb:2},children:r}),e.jsxs(F,{component:"form",onSubmit:g,noValidate:!0,children:[e.jsx(G,{margin:"normal",required:!0,fullWidth:!0,id:"firstName",label:"First Name",name:"firstName",autoComplete:"given-name",value:t.firstName,onChange:n,error:!!r&&!t.firstName,helperText:t.firstName?"":"First name is required",InputProps:{startAdornment:e.jsx(ae,{sx:{color:"action.active",mr:1}})}}),e.jsx(G,{margin:"normal",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"family-name",value:t.lastName,onChange:n,error:!!r&&!t.lastName,helperText:t.lastName?"":"Last name is required",InputProps:{startAdornment:e.jsx(ae,{sx:{color:"action.active",mr:1}})}}),e.jsx(G,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:t.email,onChange:n,error:!!r&&!t.email,helperText:t.email?"":"Email is required",InputProps:{startAdornment:e.jsx(Oe,{sx:{color:"action.active",mr:1}})}}),e.jsx(G,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password",value:t.password,onChange:n,error:!!r&&!t.password,helperText:t.password?"":"Password is required",InputProps:{startAdornment:e.jsx(We,{sx:{color:"action.active",mr:1}})}}),e.jsx(K,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:l,children:l?"Registering...":"Register"}),e.jsx(K,{fullWidth:!0,variant:"text",onClick:()=>s("/admin/login"),sx:{mt:1},children:"Already have an account? Login"})]})]})})})},Ge=x.createContext(void 0),Z=()=>{const s=x.useContext(Ge);if(!s)throw new Error("useAdmin must be used within an AdminProvider");return s},Ct=({children:s})=>{const[t,a]=x.useState({admin:null,token:localStorage.getItem("adminToken"),isAuthenticated:!!localStorage.getItem("adminToken"),dashboardStats:null}),r=async(c,o)=>{try{const h=await M.post("http://69.62.74.112:5001/api/admins/login",{email:c,password:o}),{data:n}=h.data;return a(g=>({...g,admin:n.admin,token:n.token,isAuthenticated:!0,dashboardStats:null})),localStorage.setItem("adminToken",n.token),!0}catch(h){return console.error("Login error:",h),!1}},i=()=>{a({admin:null,token:null,isAuthenticated:!1,dashboardStats:null}),localStorage.removeItem("adminToken")},l=async()=>{try{const c=await M.get("http://69.62.74.112:5001/api/admins/dashboard",{headers:{Authorization:`Bearer ${t.token}`}});if(!c.data.success)throw new Error(c.data.message||"Failed to fetch dashboard stats");a(o=>({...o,dashboardStats:c.data.data}))}catch(c){throw console.error("Dashboard stats error:",c),new Error(c.response?.data?.message||"Failed to fetch dashboard stats")}};return e.jsx(Ge.Provider,{value:{state:t,login:r,logout:i,fetchDashboardStats:l},children:s})},At=()=>{const s=P(),{login:t}=Z(),[a,r]=x.useState({email:"",password:""}),[i,l]=x.useState(""),[c,o]=x.useState(!1),h=g=>{const{name:u,value:f}=g.target;r(d=>({...d,[u]:f}))},n=async g=>{g.preventDefault(),l(""),o(!0);try{if(!a.email||!a.password){l("All fields are required");return}await t(a.email,a.password),s("/admin/dashboard",{replace:!0})}catch(u){console.error("Login error:",u),u instanceof Error?l(u.message||"Login failed. Please check your credentials."):l("Login failed. Please check your credentials.")}finally{o(!1)}};return e.jsx(Fe,{component:"main",maxWidth:"xs",children:e.jsx(F,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsxs($e,{elevation:3,sx:{p:4,width:"100%"},children:[e.jsxs(F,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:3},children:[e.jsx(Ws,{sx:{fontSize:40,color:"primary.main",mb:1}}),e.jsx(j,{component:"h1",variant:"h5",children:"Admin Login"})]}),i&&e.jsx(Ue,{severity:"error",sx:{mb:2},children:i}),e.jsxs(F,{component:"form",onSubmit:n,noValidate:!0,children:[e.jsx(G,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:a.email,onChange:h,error:!!i&&!a.email,helperText:a.email?"":"Email is required",InputProps:{startAdornment:e.jsx(Oe,{sx:{color:"action.active",mr:1}})}}),e.jsx(G,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:a.password,onChange:h,error:!!i&&!a.password,helperText:a.password?"":"Password is required",InputProps:{startAdornment:e.jsx(We,{sx:{color:"action.active",mr:1}})}}),e.jsx(K,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:c,children:c?"Logging in...":"Login"}),e.jsx(K,{fullWidth:!0,variant:"text",onClick:()=>s("/admin/register"),sx:{mt:1},children:"Don't have an account? Register"})]})]})})})},Rt=()=>{const{state:s,logout:t}=Z(),a=P(),r=()=>{t(),a("/admin/login")};return e.jsx(Us,{position:"static",color:"default",elevation:1,children:e.jsxs(Os,{children:[e.jsx(j,{variant:"h6",component:"div",sx:{flexGrow:1},children:"DigiWise Admin Dashboard"}),e.jsxs(F,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsxs(j,{variant:"body1",children:["Welcome, ",s?.admin?.firstName," ",s?.admin?.lastName]}),e.jsx(K,{variant:"outlined",color:"primary",onClick:r,children:"Logout"})]})]})})},Et=({stats:s})=>{const t={totalUsers:0,usersWithAssessments:0,recentUsers:0,assessmentParticipation:0},a={totalAssessments:0,completedAssessments:0,completionRate:0},r={low:0,moderate:0,high:0,severe:0},{userMetrics:i=t,assessmentMetrics:l=a,riskDistribution:c=r}=s||{},{totalUsers:o,usersWithAssessments:h,recentUsers:n,assessmentParticipation:g}=i,{totalAssessments:u,completedAssessments:f,completionRate:d}=l;return e.jsxs("div",{className:"space-y-6",children:[e.jsx(j,{variant:"h6",className:"text-gray-600",children:"User Metrics"}),e.jsxs(O,{container:!0,spacing:3,component:"div",children:[e.jsx(O,{item:!0,xs:12,sm:6,md:3,component:"div",children:e.jsx(W,{className:"h-full",children:e.jsx(H,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(j,{color:"textSecondary",gutterBottom:!0,children:"Total Users"}),e.jsx(j,{variant:"h4",children:o?.toLocaleString()||0})]}),e.jsx(Hs,{className:"text-blue-500",style:{fontSize:40}})]})})})}),e.jsx(O,{item:!0,xs:12,sm:6,md:3,component:"div",children:e.jsx(W,{className:"h-full",children:e.jsx(H,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(j,{color:"textSecondary",gutterBottom:!0,children:"New Users (30d)"}),e.jsx(j,{variant:"h4",children:n?.toLocaleString()||0})]}),e.jsx(Bs,{className:"text-green-500",style:{fontSize:40}})]})})})}),e.jsx(O,{item:!0,xs:12,sm:6,md:3,component:"div",children:e.jsx(W,{className:"h-full",children:e.jsx(H,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(j,{color:"textSecondary",gutterBottom:!0,children:"Active Users"}),e.jsx(j,{variant:"h4",children:h?.toLocaleString()||0}),e.jsxs(j,{variant:"caption",color:"textSecondary",children:[g.toFixed(1),"% participation"]})]}),e.jsx(qs,{className:"text-purple-500",style:{fontSize:40}})]})})})}),e.jsx(O,{item:!0,xs:12,sm:6,md:3,component:"div",children:e.jsx(W,{className:"h-full",children:e.jsx(H,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(j,{color:"textSecondary",gutterBottom:!0,children:"Assessment Completion"}),e.jsxs(j,{variant:"h4",children:[d?.toFixed(1)||0,"%"]}),e.jsxs(j,{variant:"caption",color:"textSecondary",children:[f," of ",u]})]}),e.jsx(Vs,{className:"text-orange-500",style:{fontSize:40}})]})})})})]}),e.jsx(j,{variant:"h6",className:"text-gray-600 mt-6",children:"Risk Distribution"}),e.jsx(O,{container:!0,spacing:2,component:"div",children:Object.entries(c).map(([b,y])=>e.jsx(O,{item:!0,xs:6,sm:3,component:"div",children:e.jsx(W,{children:e.jsx(H,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(j,{color:"textSecondary",gutterBottom:!0,children:[b.charAt(0).toUpperCase()+b.slice(1)," Risk"]}),e.jsx(j,{variant:"h4",children:typeof y=="number"?y:0})]}),e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center
                      ${b==="low"?"bg-green-100 text-green-600":b==="moderate"?"bg-yellow-100 text-yellow-600":b==="high"?"bg-orange-100 text-orange-600":"bg-red-100 text-red-600"}`,children:b==="low"?"L":b==="moderate"?"M":b==="high"?"H":"S"})]})})})},b))})]})},ee=["#4CAF50","#FFC107","#FF9800","#F44336"],Tt={low:45,moderate:30,high:15,severe:10},It=({riskData:s=Tt,recentAssessments:t=[]})=>{const a=Object.entries(s).map(([r,i])=>({name:r.charAt(0).toUpperCase()+r.slice(1),value:i}));return e.jsxs("div",{className:"space-y-6",children:[e.jsx(W,{children:e.jsxs(H,{children:[e.jsx(j,{variant:"h6",gutterBottom:!0,children:"Risk Distribution"}),e.jsx(F,{sx:{height:300},children:e.jsx(Ie,{width:"100%",height:"100%",children:e.jsxs(Es,{children:[e.jsx(Ts,{data:a,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",label:({name:r,percent:i})=>`${r} ${(i*100).toFixed(0)}%`,children:a.map((r,i)=>e.jsx(De,{fill:ee[i%ee.length]},`cell-${i}`))}),e.jsx(Le,{})]})})}),e.jsx("div",{className:"flex flex-wrap justify-center gap-4 mt-4",children:a.map((r,i)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:ee[i]}}),e.jsxs(j,{variant:"body2",children:[r.name,": ",r.value,"%"]})]},r.name))})]})}),e.jsx(W,{children:e.jsxs(H,{children:[e.jsx(j,{variant:"h6",gutterBottom:!0,children:"Recent Assessments"}),e.jsx("div",{className:"space-y-4",children:t&&t.length>0?t.map((r,i)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs(j,{variant:"subtitle1",children:[r.User?.firstName," ",r.User?.lastName]}),e.jsx(j,{variant:"body2",color:"textSecondary",children:r.User?.email})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs(j,{variant:"subtitle1",color:"primary",children:["Score: ",r.Result?.overall_score||"N/A"]}),e.jsx(j,{variant:"body2",sx:{color:ee[Object.keys(s).indexOf(r.Result?.risk_level?.toLowerCase()||"")]},children:r.Result?.risk_level||"N/A"})]})]},i)):e.jsx(j,{variant:"body1",color:"textSecondary",align:"center",children:"No recent assessments available"})})]})})]})},Lt=()=>{const[s,t]=x.useState("users"),a=[{id:"users",name:"User Management",icon:e.jsx(Is,{size:20,className:"mr-2"}),description:"View and manage user accounts, permissions, and activity."},{id:"assessments",name:"Assessment Management",icon:e.jsx(Ee,{size:20,className:"mr-2"}),description:"Manage assessment questions, view responses, and export data."},{id:"content",name:"Content Management",icon:e.jsx(q,{size:20,className:"mr-2"}),description:"Update educational resources and DepEd-aligned materials."},{id:"settings",name:"System Settings",icon:e.jsx(Ls,{size:20,className:"mr-2"}),description:"Configure assessment scoring algorithms and update site content."}];return e.jsxs("div",{className:"mt-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Management Functions"}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"flex overflow-x-auto border-b border-slate-200",children:a.map(r=>e.jsx("button",{className:`px-6 py-3 text-sm font-medium whitespace-nowrap ${s===r.id?"border-b-2 border-slate-800 text-slate-800":"text-slate-500 hover:text-slate-700"}`,onClick:()=>t(r.id),children:e.jsxs("div",{className:"flex items-center",children:[r.icon,r.name]})},r.id))}),e.jsx("div",{className:"p-6",children:a.map(r=>s===r.id&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-slate-600",children:r.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-4",children:[s==="users"&&e.jsxs(e.Fragment,{children:[e.jsx(R,{title:"View All Users",description:"Browse and search all user accounts"}),e.jsx(R,{title:"User Analytics",description:"View detailed user engagement metrics"}),e.jsx(R,{title:"User Permissions",description:"Manage role-based access control"})]}),s==="assessments"&&e.jsxs(e.Fragment,{children:[e.jsx(R,{title:"Question Bank",description:"View and edit assessment questions"}),e.jsx(R,{title:"Response Data",description:"View detailed assessment responses"}),e.jsx(R,{title:"Export Results",description:"Download assessment data in various formats"})]}),s==="content"&&e.jsxs(e.Fragment,{children:[e.jsx(R,{title:"Educational Resources",description:"Manage learning materials and guides"}),e.jsx(R,{title:"DepEd Materials",description:"Update curriculum-aligned content"}),e.jsx(R,{title:"Resource Categories",description:"Organize content into categories"})]}),s==="settings"&&e.jsxs(e.Fragment,{children:[e.jsx(R,{title:"Scoring Algorithm",description:"Configure assessment scoring parameters"}),e.jsx(R,{title:"Site Settings",description:"Update website configuration"}),e.jsx(R,{title:"Notification Settings",description:"Configure email and in-app notifications"})]})]})]},r.id))})]})]})},R=({title:s,description:t})=>e.jsxs("div",{className:"bg-slate-50 rounded-md p-4 hover:bg-slate-100 transition-colors cursor-pointer",children:[e.jsx("h3",{className:"font-medium text-slate-800",children:s}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:t}),e.jsx("div",{className:"mt-2 flex justify-end",children:e.jsx(Ds,{size:16,className:"text-slate-400"})})]}),Dt=()=>{const{state:s}=Z(),t=()=>{const r=["User ID","Assessment ID","Completion Date","Overall Score","Risk Level","Screen Time","Mental Health Effects","Digital Well-being"],i=s.userResults.map(n=>[n.userId,n.assessmentId,new Date(n.completedAt).toLocaleDateString(),n.overallScore,n.riskLevel,n.categoryScores["Screen Time"]||"N/A",n.categoryScores["Mental Health Effects"]||"N/A",n.categoryScores["Digital Well-being"]||"N/A"]),l=[r.join(","),...i.map(n=>n.join(","))].join(`
`),c=new Blob([l],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(c),h=document.createElement("a");h.setAttribute("href",o),h.setAttribute("download",`digiwise_assessment_data_${new Date().toISOString().split("T")[0]}.csv`),h.style.visibility="hidden",document.body.appendChild(h),h.click(),document.body.removeChild(h)},a=[{id:1,name:"Export Data",description:"Download assessment results as CSV",icon:e.jsx(he,{size:20,className:"text-blue-600"}),color:"bg-blue-50 text-blue-800 hover:bg-blue-100",onClick:t},{id:2,name:"Send Notifications",description:"Communicate with users",icon:e.jsx(Ms,{size:20,className:"text-purple-600"}),color:"bg-purple-50 text-purple-800 hover:bg-purple-100"},{id:3,name:"Generate Reports",description:"Create summary reports",icon:e.jsx(ne,{size:20,className:"text-green-600"}),color:"bg-green-50 text-green-800 hover:bg-green-100"},{id:4,name:"Backup Data",description:"System backup options",icon:e.jsx(Ps,{size:20,className:"text-amber-600"}),color:"bg-amber-50 text-amber-800 hover:bg-amber-100"}];return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Quick Actions"}),e.jsx("div",{className:"space-y-3",children:a.map(r=>e.jsxs("button",{className:`w-full p-3 rounded-md transition-colors flex items-start ${r.color}`,onClick:r.onClick,children:[e.jsx("div",{className:"mr-3 mt-0.5",children:r.icon}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:r.name}),e.jsx("div",{className:"text-xs opacity-75",children:r.description})]})]},r.id))})]})},Mt=()=>{let s={low:0,moderate:0,high:0,severe:0},t=[];const{state:a,fetchDashboardStats:r}=Z(),i=P(),l=x.useCallback(()=>{a?.isAuthenticated||i("/admin/login")},[a?.isAuthenticated,i]);x.useEffect(()=>{l(),a?.isAuthenticated&&!a?.dashboardStats&&r().catch(h=>{console.error("Failed to fetch dashboard stats:",h)})},[a?.isAuthenticated,l,r]);const c=x.useMemo(()=>e.jsx("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading dashboard data..."})]})}),[]);if(!a?.dashboardStats)return c;const o=a.dashboardStats;return o.riskDistribution&&(s={low:o.riskDistribution.low||0,moderate:o.riskDistribution.moderate||0,high:o.riskDistribution.high||0,severe:o.riskDistribution.severe||0}),Array.isArray(o.recentAssessments)&&(t=o.recentAssessments),e.jsxs("div",{className:"min-h-screen bg-slate-100",children:[e.jsx(Rt,{}),e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-6",tabIndex:0,children:"Dashboard Overview"}),e.jsx(Et,{stats:{userMetrics:{totalUsers:o.userMetrics?.totalUsers||0,usersWithAssessments:o.userMetrics?.usersWithAssessments||0,recentUsers:o.userMetrics?.recentUsers||0,assessmentParticipation:o.userMetrics?.assessmentParticipation||0},assessmentMetrics:{totalAssessments:o.assessmentMetrics?.totalAssessments||0,completedAssessments:o.assessmentMetrics?.completedAssessments||0,completionRate:o.assessmentMetrics?.completionRate||0},riskDistribution:{low:o.riskDistribution?.low||0,moderate:o.riskDistribution?.moderate||0,high:o.riskDistribution?.high||0,severe:o.riskDistribution?.severe||0}}}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mt-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(It,{riskData:s,recentAssessments:t})}),e.jsx("div",{children:e.jsx(Dt,{})})]}),e.jsx(Lt,{})]})]})},Qe="http://69.62.74.112:5001/api";console.log("API Base URL:",Qe);const se=M.create({baseURL:Qe,headers:{"Content-Type":"application/json"},withCredentials:!0,timeout:1e4});se.interceptors.request.use(s=>{const t=localStorage.getItem("userToken");return t&&(s.headers.Authorization=`Bearer ${t}`),s},s=>(console.error("Request interceptor error:",s),Promise.reject(s)));se.interceptors.response.use(s=>s,s=>(s.code==="ECONNABORTED"?console.error("Request timeout - The server took too long to respond"):s.response?console.error("Response error:",{status:s.response.status,data:s.response.data,headers:s.response.headers}):s.request?console.error("No response received:",s.request):console.error("Request setup error:",s.message),Promise.reject(s)));se.interceptors.response.use(s=>s,s=>(s.response?.status===401&&(localStorage.removeItem("userToken"),window.location.href="/login"),Promise.reject(s)));const Pt=[{path:"/health",description:"Basic health check"},{path:"/api/health",description:"API health check"},{path:"/",description:"Root endpoint"}],zt=()=>{const[s,t]=x.useState("Testing connection to backend..."),[a,r]=x.useState(""),[i,l]=x.useState({}),[c,o]=x.useState(!0);return x.useEffect(()=>((async()=>{o(!0);const n={};let g=!1;for(const{path:u,description:f}of Pt)try{t(`Trying ${u} (${f})...`),r("");const d=await se.get(u);n[u]=`â Success (${d.status} ${d.statusText})`,l({...n}),g=!0,t("â Connection successful!"),console.log(`Success at ${endpoint}:`,d.data)}catch(d){const b=d.response?.status||"No response",y=d.response?.data?.message||(d instanceof Error?d.message:"Unknown error occurred"),w=`â Failed to connect to ${u}: ${b} - ${y}`;r(w),n[u]=`â Failed: ${b} - ${y}`,l({...n}),g||t("â Connection failed"),console.error(`Error at ${u}:`,d)}t("All connection attempts failed")})(),()=>o(!1)),[]),c?e.jsxs("div",{className:"connection-test",style:{padding:"20px",fontFamily:"Arial, sans-serif"},children:[e.jsx("div",{className:"status",children:s}),a&&e.jsx("div",{className:"error",children:a}),e.jsx("div",{className:"tested-endpoints",children:Object.entries(i).map(([h,n])=>e.jsxs("div",{className:"endpoint-result",style:{marginBottom:"8px"},children:[e.jsx("strong",{children:h})," - ",n]},h))})]}):e.jsxs("div",{style:{padding:"20px",fontFamily:"monospace",maxWidth:"800px",margin:"0 auto"},children:[e.jsx("h2",{children:"Backend Connection Test"}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsxs("div",{children:["Status: ",e.jsx("strong",{children:s})]}),e.jsxs("div",{children:["API Base URL: ",e.jsx("code",{children:"http://69.62.74.112:5001/api"})]})]}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx("h3",{children:"Test Results:"}),e.jsxs("div",{style:{backgroundColor:"#f5f5f5",padding:"15px",borderRadius:"4px",fontFamily:"monospace",whiteSpace:"pre-wrap",overflowX:"auto"},children:[Object.entries(i).map(([h,n])=>e.jsxs("div",{style:{margin:"5px 0"},children:[e.jsxs("strong",{children:[h,":"]})," ",n]},h)),Object.keys(i).length===0&&"No endpoints tested yet..."]})]}),a&&e.jsxs("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#ffebee",borderLeft:"4px solid #f44336",color:"#b71c1c"},children:[e.jsx("h4",{children:"Error Details:"}),e.jsx("pre",{style:{whiteSpace:"pre-wrap",wordBreak:"break-word",margin:"10px 0 0",padding:"10px",backgroundColor:"rgba(0,0,0,0.05)",borderRadius:"4px",overflowX:"auto"},children:a})]}),e.jsxs("div",{style:{marginTop:"20px",fontSize:"0.9em",color:"#666"},children:[e.jsx("p",{children:"If all endpoints fail, please check:"}),e.jsxs("ul",{style:{margin:"5px 0 0 20px"},children:[e.jsx("li",{children:"Is the backend server running?"}),e.jsx("li",{children:"Is the IP address and port correct?"}),e.jsx("li",{children:"Is there a firewall blocking the connection?"}),e.jsx("li",{children:"Is the backend configured to accept requests from this origin?"})]})]})]})},Ce=({children:s})=>{const{state:t}=Q();return t.isAuthenticated?e.jsx(e.Fragment,{children:s}):e.jsx(_e,{to:"/auth",replace:!0})},_t=({children:s})=>{const{state:t}=Z();return t.isAuthenticated?e.jsx(e.Fragment,{children:s}):e.jsx(_e,{to:"/admin/login",replace:!0})};function Ft(){return e.jsx(Ct,{children:e.jsx(Qs,{children:e.jsx(at,{children:e.jsx(zs,{children:e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(ge,{}),e.jsx("main",{className:"flex-grow",children:e.jsxs(_s,{children:[e.jsx(T,{path:"/",element:e.jsxs(e.Fragment,{children:[e.jsx(Ys,{}),e.jsx(Xs,{}),e.jsx(Ks,{}),e.jsx(Js,{})]})}),e.jsx(T,{path:"/assessment",element:e.jsx(Ce,{children:e.jsx(it,{})})}),e.jsx(T,{path:"/results",element:e.jsx(Ce,{children:e.jsx(dt,{})})}),e.jsx(T,{path:"/about",element:e.jsx(gt,{})}),e.jsx(T,{path:"/resources",element:e.jsx(wt,{})}),e.jsx(T,{path:"/auth",element:e.jsx(vt,{})}),e.jsx(T,{path:"/admin/register",element:e.jsx(kt,{})}),e.jsx(T,{path:"/admin/login",element:e.jsx(At,{})}),e.jsx(T,{path:"/admin/dashboard",element:e.jsx(_t,{children:e.jsx(Mt,{})})}),e.jsx(T,{path:"/test-connection",element:e.jsx(zt,{})})]})}),e.jsx(pe,{})]})})})})})}Fs.createRoot(document.getElementById("root")).render(e.jsx($s.StrictMode,{children:e.jsx(Ft,{})}));
